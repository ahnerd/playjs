var Py={debug:true,rootPath:undefined,stackTrace:false,defaultNamespace:this,theme:"default",resource:"share",trace:true};(function(w){var rSpace=/^[\s\u00A0]+|[\s\u00A0]+$/g,rFormat=/\{+?(\S*?)\}+/g,rPoint=/\./g,rFirstChar=/\b[a-z]/g,rWhite=/%20/g,rToCamelCase=/[\-_]\D/g,eventMgr={$default:{add:emptyFn,initEvent:emptyFn,remove:emptyFn}},document=w.document,navigator=w.navigator,o=w.Object,toString=o.prototype.toString,hasOwnProperty=o.prototype.hasOwnProperty,ap=Array.prototype,p=namespace("Py.",{data:function(obj,type){assert.isObject(obj,"Py.data(obj, type): 参数 {obj} ~。");var d=obj.$data||(obj.$data={});return d[type]||(d[type]={})},getData:function(obj,type){assert.isObject(obj,"Py.getData(obj, type): 参数 {obj} ~。");var d=obj.$data;return d&&d[type]},setData:function(obj,type,data){assert.isObject(obj,"Py.setData(obj, type): 参数 {obj} ~。");return(obj.$data||(obj.$data={}))[type]=data},cloneData:function(dest,src){assert.isObject(src,"Py.cloneData(dest, src): 参数 {src} ~。");assert.isObject(dest,"Py.cloneData(dest, src): 参数 {dest} ~。");var data=src.$data;if(data){dest.$data=o.clone.call(1,data);var evt=src.$data.event,i;if(evt){delete dest.data.event;for(i in evt){evt[i].handlers.forEach(function(fn){p.IEvent.on.call(dest,i,fn)})}}}return dest},eval:w.execScript||function(statement){return w.eval(statement)},Class:function(members){return Object.extend(members)},Object:Object,namespaces:[],loadStyle:function(url){document.getElementsByTagName("HEAD")[0].appendChild(apply(document.createElement("link"),{href:url,rel:"stylesheet",type:"text/css"}))},loadScript:function(url){return p.loadText(url,p.eval)},loadText:function(url,callback){assert.notNull(url,"Py.loadText(url, callback): 参数 {url} ~。");var xmlHttp=new XMLHttpRequest();try{xmlHttp.open("GET",url,false);xmlHttp.send(null);if(!XMLHttpRequest.isOk(xmlHttp)){throw String.format("请求失败:  \r\n   地址: {0} \r\n   状态: {1}   {2}  {3}",url,xmlHttp.status,xmlHttp.statusText,w.location.protocol=="file:"?"\r\n原因: 当前正使用 file 协议打开文件，请使用 http 协议。":"")}url=xmlHttp.responseText;return callback?callback(url):uri}catch(e){trace.error(e)}finally{xmlHttp=null}return null},using:function(namespace,isStyle){assert.isString(namespace,"using(namespace): 参数 {namespace} 不是合法的名字空间。");if(p.namespaces.include(namespace)){return}if(namespace.indexOf("/")===-1){namespace=namespace.toLowerCase().replace(rPoint,"/")+(isStyle?".css":".js")}var doms,check,callback;if(isStyle){callback=p.loadStyle;doms=document.styleSheets;src="href"}else{callback=p.loadScript;doms=document.getElementsByTagName("SCRIPT");src="src"}each.call(doms,function(dom){return !dom[src]||dom[src].toLowerCase().indexOf(namespace)===-1})&&callback(p.rootPath+namespace)},namespace:namespace,defaultNamespace:w,addEventListener:document.addEventListener?function(type,fn){this.addEventListener(type,fn,false)}:function(type,fn){this.attachEvent("on"+type,fn)},removeEventListener:document.removeEventListener?function(type,fn){this.removeEventListener(type,fn,false)}:function(type,fn){this.detachEvent("on"+type,fn)},Events:eventMgr,IEvent:{on:function(type,fn){assert.isFunction(fn,"IEvent.on(type, fn): 参数 {fn} ~。");var me=this,d=p.data(me,"event"),evt=d[type],eMgr;if(!evt){eMgr=me;evt=me.constructor;while(!(eMgr=eventMgr[eMgr.xType])||!(eMgr=eMgr[type])){if(evt&&(evt=evt.base)){eMgr=evt.prototype}else{eMgr=eventMgr.$default;break}}evt=function(e){var fn=arguments.callee,target=fn.target,handlers=fn.handlers.slice(0),i=-1,len=handlers.length;while(++i<len){if(handlers[i].call(target,e)===false){return false}}return true};evt.event=eMgr;evt.handlers=[eMgr.initEvent,fn];d[type]=evt;eMgr.add(evt.target=me,type,evt)}else{evt.handlers.push(fn)}return me},one:function(type,fn){assert.isFunction(fn,"IEvent.one(type, fn): 参数 {fn} ~。");return this.on(type,function(){this.un(type,arguments.callee);return fn.apply(this,arguments)})},un:function(type,fn){assert(!fn||o.isFunction(fn),"IEvent.un(type, fn): 参数 {fn} 必须是可执行的函数或空参数。",fn);var me=this,d=p.getData(me,"event"),evt;if(d){if(evt=d[type]){if(fn){evt.handlers.remove(fn)}if(!fn||evt.handlers.length<2){evt.handlers=null;delete d[type];evt.event.remove(me,type,evt)}}else{if(!type){for(evt in d){me.un(evt)}}}}return me},trigger:function(type,e){var me=this,evt=p.getData(me,"event");return !evt||!(evt=evt[type])||(evt.event.trigger?evt.event.trigger(me,type,evt,e):evt(e))}}});apply(Object,{implement:function(obj){assert(obj&&this.prototype,"Class.implement(obj): 无法扩展类，因为 {obj} 或 this.prototype 为空。",obj);o.extend(this.prototype,obj);return this},implementIf:function(obj){assert(obj&&this.prototype,"Class.implementIf(obj): 无法扩展类，因为 {obj} 或 this.prototype 为空。",obj);applyIf(this.prototype,obj);return this},addEvents:function(events){var ep=this.prototype;assert(!events||o.isObject(events),"Class.addEvents(events): 参数 {event} 必须是一个包含事件的对象。 如 {click: { add: ..., remove: ..., initEvent: ..., trigger: ... } ",events);applyIf(ep,p.IEvent);if(events){var xType=hasOwnProperty.call(ep,"xType")?ep.xType:(ep.xType=(p.id++).toString());o.update(events,function(e){return applyIf(e,eventMgr.$default)},eventMgr[xType]||(eventMgr[xType]={}))}return this},extend:function(members){var subClass=hasOwnProperty.call(members=members instanceof Function?{constructor:members}:(members||{}),"constructor")?members.constructor:function(){arguments.callee.base.apply(this,arguments)};emptyFn.prototype=(subClass.base=this).prototype;subClass.prototype=o.extend(new emptyFn(),members);subClass.prototype.constructor=subClass;return Class(subClass)}});apply(o,{extend:(function(){for(var item in {toString:true}){return apply}p.enumerables=["toString","hasOwnProperty","valueOf","constructor","isPrototypeOf"];return function(dest,src){for(var i=p.enumerables.length,value;i--;){if(hasOwnProperty.call(src,value=p.enumerables[i])){dest[value]=src[value]}}return apply(dest,src)}})(),extendIf:applyIf,each:function(iterable,fn,bind){assert(!o.isFunction(iterable),"Object.each(iterable, fn, bind): 参数 {iterable} 不能是可执行的函数。 ",iterable);assert(o.isFunction(fn),"Object.each(iterable, fn, bind): 参数 {fn} 必须是可执行的函数。 ",fn);if(iterable!=null){if(iterable.length===undefined){for(var t in iterable){if(fn.call(bind,iterable[t],t,iterable)===false){return false}}}else{return each.call(iterable,fn,bind)}}return true},update:function(iterable,fn,dest,args){dest=dest||iterable;o.each(iterable,o.isFunction(fn)?function(value,key){value=fn.call(args,value,key);if(value!==undefined){dest[key]=value}}:function(value,key){if(value!=undefined){value=value[fn];assert(dest[key],"Object.update(iterable, fn, dest, args): 试图把iterable[{key}][{fn}] 放到 dest[key][fn], 但  dest[key] 是一个空的成员。");if(args){dest[key][fn]=value}else{dest[key]=value}}});return dest},isObject:function(obj){return obj!==null&&typeof obj=="object"},isArray:function(obj){return toString.call(obj)==="[object Array]"},isFunction:function(obj){return toString.call(obj)==="[object Function]"},type:function(obj){var b=typeof obj;switch(b){case"object":return obj==null?"null":(obj.xType||b);case"function":for(obj in obj.prototype){return"class"}default:return b}},clone:function(obj){var deep=this-1;if(o.isObject(obj)&&!(deep<0)){if(obj.clone){return obj.clone()}obj=o.update(obj,o.clone,o.isArray(obj)?[]:{},deep)}return obj},set:function(obj,config){if(config){for(var key in config){var setter="set"+key.capitalize(),val=config[key];if(o.isFunction(obj[setter])){obj[setter](val)}else{if(o.isFunction(obj[key])){obj[key](val)}else{if(obj[key]&&obj[key].set){obj[key].set(val)}else{if(obj.set){obj.set(key,val)}else{obj[key]=val}}}}}}},addCallback:function(obj,name,fn){assert.notNull(obj,"Object.addCallback(obj, name, fn): 参数 obj ~。");assert.isFunction(fn,"Object.addCallback(obj, name, fn): 参数 {fn} ~。");var f=obj[name];obj[name]=typeof f==="function"?function(){var v=f.apply(this,arguments);fn.apply(this,arguments);return v}:fn;return obj}});applyIf(Array,{create:function(iterable,start){if(!iterable){return[]}if(iterable.item||iterable.count){var l=iterable.length||iterable.count;start=start||0;var r=new Array(l);while(l--){r[l]=iterable[start++]}return r}return ap.slice.call(iterable,start)},copyIf:function(src,dest){for(var i=0;i<src.length;i++){dest.include(src[i])}},plain:function(){var r=[];ap.forEach.call(arguments,function(d){if(o.isArray(d)){Array.copyIf(d,r)}else{r.include(d)}});return r}});apply(Function,{empty:emptyFn,returnTrue:from(true),returnFalse:from(false),bind:function(fn,bind){assert.isFunction(fn,"Function.bind(fn): 参数 {fn} ~。");return function(){return fn.apply(bind,arguments)}},from:from});apply(String,{format:function(format,object){if(!format){return""}assert(format.replace,"String.format(format, object): 参数 {format} 必须是字符串。",format);var toString=this,arr=o.isObject(object)&&arguments.length===2?object:ap.slice.call(arguments,1);return format.replace(rFormat,function(match,name){var start=match.charAt(1)=="{",end=match.charAt(match.length-2)=="}";if(start||end){return match.slice(start,match.length-end)}return name in arr?toString(arr[name]):""})},map:function(str,source,dest,copyIf){assert(typeof str=="string","String.map(str, source, dest, copyIf): 参数 {str} 必须是字符串。",str);var isFn=o.isFunction(source);str.split(" ").forEach(function(v,k,c){var val=isFn?source(v,k,c):source[v];if(dest&&!(copyIf&&(v in dest))){dest[v]=val}});return dest},param:function(obj){if(!obj){return""}var s=[],e=encodeURIComponent;o.each(obj,function(value,key){s.push(e(key)+"="+e(value))});return s.join("&").replace(rWhite,"+")},ellipsis:function(value,len){assert.isString(value,"String.ellipsis(value, len): 参数  {value} ~。");assert.isNumber(len,"String.ellipsis(value, len): 参数  {len} ~。");return value.length>len?value.substr(0,len)+"...":value}});applyIf(Date,{now:function(){return +new Date()}});applyIf(navigator,(function(ua){var match=ua.match(/(IE|Firefox|Chrome|Safari|Opera|Navigator).((\d+)\.?[\d.]*)/i)||["","Other",0,0],version=ua.match(/(Version).((\d+)\.?[\d.]*)/i)||match,browser=match[1],fullBrowser=browser+version[3];navigator["is"+browser]=navigator["is"+fullBrowser]=true;return{browser:browser,version:version[2],isQuirks:typeof Element!=="function"&&String(w.Element).indexOf("object Element")===-1,isStd:!!-[1],fullBrowser:fullBrowser}})(navigator.userAgent));Date.prototype.xType="date";RegExp.prototype.xType="regexp";each.call([String,Array,Function,Date,Number],Class);Object.implement({base:function(name,args){var me=this.constructor,fn=this[name];assert(fn,"Object.prototype.base(name, args): 子类不存在 {name} 的属性或方法。",name);fn.$bubble=true;assert(!me||me.prototype[name],"Object.prototype.base(name, args): 父类不存在 {name} 的属性或方法。",name);do{me=me.base;assert(me&&me.prototype[name],"Object.prototype.base(name, args): 父类不存在 {name} 的属性或方法。",name)}while("$bubble" in (fn=me.prototype[name]));fn.$bubble=true;try{if(args===arguments.callee.caller.arguments){return fn.apply(this,args)}arguments[0]=this;return fn.call.apply(fn,arguments)}finally{delete fn.$bubble}},memberwiseClone:function(){var me=this,newObject=new me.constructor(),i;for(i in me){if(hasOwnProperty.call(me,i)){newObject[i]=me[i]}}return newObject}});String.implementIf({toCamelCase:function(){return this.replace(rToCamelCase,toCamelCase)},trim:function(){return this.replace(rSpace,"")},capitalize:function(){return this.replace(rFirstChar,toUpperCase)}});Array.implementIf({indexOf:function(item,startIndex){startIndex=startIndex||0;for(var l=this.length;startIndex<l;startIndex++){if(this[startIndex]===item){return startIndex}}return -1},each:each,filter:function(fn,bind){var r=[];ap.forEach.call(this,function(value,i,array){if(fn.call(this,value,i,array)){r.push(value)}},bind);return r},forEach:each,select:function(name,value){var me=this,index=-1,i=-1,l=me.length,t,fn=o.isFunction(name)?name:function(t){return t[name]===value};while(++i<l){t=me[i];if(fn.call(t,t,i,me)){me[++index]=t}}me.splice(++index,l-index);return me},include:function(value){var b=this.indexOf(value)!==-1;if(!b){this.push(value)}return b},insert:function(index,value){assert.isNumber(index,"Array.prototype.insert(index, value): 参数 index ~。");for(var i=this.length++;i>index;i--){this[i]=this[i-1]}this[index]=value;return this},invoke:function(fn,args){assert(o.isFunction(fn)||(args&&typeof args.length==="number"),"Array.prototype.invoke(fn, args): 参数 {args} 必须是数组, 无法省略。",args);var r=[];ap.forEach.call(this,o.isFunction(fn)?function(value,index){r.push(fn.call(args,value,index))}:function(value){assert(value&&o.isFunction(value[fn]),"Array.prototype.invoke(fn, args): {args} 内的 {value} 不包含可执行的函数 {fn}。",args,value,fn);r.push(value[fn].apply(value,args))});return r},unique:function(){var r=[];Array.copyIf(this,r);return r},remove:function(value){var i=this.indexOf(value);if(i!==-1){this.splice(i,1)}return i},xType:"array"});if(!w.XMLHttpRequest||navigator.isQuirks){try{(w.XMLHttpRequest=function(){return new ActiveXObject("MSXML2.XMLHTTP")})()}catch(e){try{(w.XMLHttpRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")})()}catch(e){}}}w.XMLHttpRequest.isOk=function(xmlHttp){assert.isObject(xmlHttp,"XMLHttpRequest.isOk(xmlHttp): 参数 {xmlHttp} 不是合法的 XMLHttpRequest 对象");var status=xmlHttp.status;if(!status){var protocol=w.location.protocol;return(protocol=="file: "||protocol=="chrome: "||protocol=="app: ")}return(status>=200&&status<300)||status==304||status==1223};apply(p,{id:Date.now()%100,rootPath:p.rootPath||(function(){var b=document.getElementsByTagName("script");b=b[b.length-1];b=navigator.isQuirks?b.getAttribute("src",5):b.src;return(b.match(/[\S\s]*\//)||[""])[0]})(),setupWindow:function(w){String.map("Class using namespace undefined IEvent",p,w,true);var document=w.document,doReady=function(){if(document.isReady){return}document.isReady=true;p.removeEventListener.call(document,eventName,doReady,false);doReady.list.invoke("call",[document,p]);doReady=null},doLoad=function(){document.isLoaded=true;p.removeEventListener.call(w,"load",doLoad,false);doLoad.list.invoke("call",[w,p]);doLoad=null},eventName=navigator.isStd?"DOMContentLoaded":"readystatechange";document.onReady=function(fn){assert.isFunction(fn,"document.ready(fn): 参数 {fn} ~。");if(document.isReady){fn.call(document)}else{doReady.list.push(fn)}};document.onLoad=function(fn){assert.isFunction(fn,"document.ready(fn): 参数 {fn} ~。");if(document.isLoaded){fn.call(w)}else{doLoad.list.push(fn)}};doReady.list=[];doLoad.list=[doReady];if(document.readyState!=="complete"){p.addEventListener.call(document,eventName,doReady,false);p.addEventListener.call(w,"load",doLoad,false);if(!navigator.isStd){var toplevel=false;try{toplevel=w.frameElement==null}catch(e){}if(toplevel&&document.documentElement.doScroll){(function(){if(document.isReady){return}try{document.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,1);return}doReady()})()}}}else{setTimeout(doLoad,1)}}});p.setupWindow(w);function apply(dest,src){assert(dest!=null,"Object.extend(dest, src): 参数 {dest} 不可为空。",dest);assert(src!=null,"Object.extend(dest, src): 参数 {src} 不可为空。",src);for(var b in src){dest[b]=src[b]}return dest}function applyIf(dest,src){assert(dest!=null,"Object.extendIf(dest, src): 参数 {dest} 不可为空。",dest);assert(src!=null,"Object.extendIf(dest, src): 参数 {src} 不可为空。",src);for(var b in src){if(dest[b]===undefined){dest[b]=src[b]}}return dest}function each(fn,bind){assert(o.isFunction(fn),"Array.prototype.each(fn, bind): 参数 {fn} 必须是一个可执行的函数。",fn);var i=-1,me=this,l=me.length;while(++i<l){if(fn.call(bind,me[i],i,me)===false){return false}}return true}function Class(constructor){return applyIf(constructor,Object)}function Object(){}function from(obj){return function(){return obj}}function toCamelCase(match){return match.charAt(1).toUpperCase()}function toUpperCase(match){return match.toUpperCase()}function emptyFn(){}function namespace(name,obj){assert(name&&name.split,"namespace(namespace, obj, value): 参数 {namespace} 不是合法的名字空间。",name);if(arguments.length==1){return p.namespaces.include(name)}name=name.split(".");var current=w,i=-1,len=name.length-1;name[0]=name[0]||"Py";while(++i<len){current=current[name[i]]||(current[name[i]]={})}i=name[len];if(!i){obj=applyIf(current,obj);i=name[--len]}else{current[i]=obj}if(!(i in Py.defaultNamespace)){Py.defaultNamespace[i]=obj}return obj}})(this);Object.extend(String,{toUTF8:function(a){return a.replace(/[^\x00-\xff]/g,function(d,c){return"\\u"+((c=d.charCodeAt())<16?"000":c<256?"00":c<4096?"0":"")+c.toString(16)})},fromUTF8:function(a){return a.replace(/\\u([0-9a-f]{3})([0-9a-f])/gi,function(e,d,f){return String.fromCharCode((parseInt(d,16)*16+parseInt(f,16)))})}});function trace(c,b){if(arguments.length==0||!Py.trace){return}var a=window.console&&console.log;if(typeof c=="string"){if(arguments.length>1){c=String.format.apply(trace.inspect,arguments)}}else{if(!a||navigator.isIE8){c=trace.inspect(c,b)}}if(a){console.log(c)}else{trace.write(c)}}Object.extendIf(trace,{write:function(a){alert(a)},api:function(f,g){var m="API信息: ",b=[];if(arguments.length===0){m="全局对象: ";g="";String.map("Object String Date Array RegExp Function Element document Py navigator XMLHttpRequest",function(e){a(window,e)});for(var h in Py){if(Py.defaultNamespace[h]===Py[h]){a(Py,h)}}}else{if(f!=null){if(f.prototype){for(var h in f.prototype){var n=f;try{while(!Object.prototype.hasOwnProperty.call(n.prototype,h)&&(n=n.base)&&n.prototype){}n=n===f?"":(n=d(n))?"(继承于 "+n+" 类)":"(继承的)";b.push("prototype."+h+" "+p(f.prototype[h],h)+n)}catch(i){}}}for(var o in f){try{a(f,o)}catch(i){}}}}if(g===undefined){var l=Object.type(f),c=f!=null&&f.constructor;String.map("Object String Date Array RegExp Number Function Element XMLHttpRequest",function(e){if(window[e]===f){m=e+" "+p(f,e)+"的成员: ";g=e}else{if(c===window[e]){g=e+".prototype";m=e+" 类的实例成员: "}}});if(!g){if(l=d(f)){var n=p(f,l)==="类"&&d(f.base);m=l+" "+p(f,l)+(n?"(继承于 "+n+" 类)":"")+"的成员: ";g=l}else{if(l=d(c)){g=l+".prototype";m=l+" 类的实例成员: "}}}}if(b.length===0){b.push(m+"无")}else{b.sort();b.unshift(m)}trace(b.join(g?"\r\n"+g+".":"\r\n"));function j(q){for(var e in q){return false}return true}function p(q,e){if(typeof q==="function"&&e==="constructor"){return"构造函数"}if(q&&q.prototype&&!j(q.prototype)){return"类"}if(Object.isObject(q)){return e.charAt(0)==="I"&&k(e,1)?"接口":"对象"}if(Object.isFunction(q)){return k(e,0)?"类":"函数"}return"属性"}function k(q,e){q=q.charCodeAt(e);return q<=90&&q>=65}function d(q){if(q){for(var e in Py){if(Py[e]===q){return e}}}return null}function a(q,e){b.push(e+" "+p(q[e],e))}},from:function(a){return function(){trace(a,arguments)}},dir:function(c){if(Py.trace){if(window.console&&console.dir){console.dir(c)}else{if(c){var b="{\r\n",a;for(a in c){b+="\t"+a+" = "+trace.inspect(c[a],1)+"\r\n"}b+="}";trace.alert(b)}}}},inspect:function(e,a){if(a==null){a=0}switch(typeof e){case"function":if(a==0&&e.prototype&&e.prototype.xType){return String.format("class {0} : {1} {2}",e.prototype.xType,(e.prototype.base&&e.prototype.base.xType||"Object"),trace.inspect(e.prototype,a+1))}return a==0?String.fromUTF8(e.toString()):"function()";case"object":if(e==null){return"null"}if(a>=3){return e.toString()}if(Object.isArray(e)){return"["+Object.update(e,trace.inspect,[]).join(", ")+"]"}else{if(e.setInterval&&e.resizeTo){return"window"}if(e.nodeType){if(e.nodeType==9){return"document"}if(e.tagName){var c=e.tagName.toLowerCase(),d=c;if(e.id){d+="#"+e.id;if(e.className){d+="."+e.className}}else{if(e.outerHTML){d=e.outerHTML}else{if(e.className){d+=' class=".'+e.className+'"'}d="<"+d+">"+e.innerHTML+"</"+c+">  "}}return d}return"[Node name="+e.nodeName+"value="+e.nodeValue+"]"}var d="{\r\n",b;for(b in e){d+="\t"+b+" = "+trace.inspect(e[b],a+1)+"\r\n"}d+="}";return d}case"string":return a==0?e:'"'+e+'"';case"undefined":return"undefined";default:return e.toString()}},log:function(){if(Py.trace){if(window.console&&console.log&&console.log.apply){console.log.apply(console,arguments)}else{trace(Object.update(arguments,trace.inspect,[]).join(" "))}}},error:function(a){if(Py.trace){if(window.console&&console.error){console.error(a)}else{throw a}}},warn:function(a){if(Py.trace){if(window.console&&console.warn){console.warn(a)}else{trace.alert("[警告]"+a)}}},info:function(a){if(Py.trace){if(window.console&&console.info){console.info(a)}else{trace.alert("[信息]"+a)}}},ifDebug:function(a){if(Py.debug===false){return}try{a();return""}catch(b){return b}},clear:function(){if(window.console&&console.clear){console.clear()}},empty:function(a){trace("函数运行了    "+(a||Py.id++))},ifNot:function(b,a){if(!b){trace.warn(a)}},test:function(a,b){trace("[时间] "+trace.runTime(a,null,b))},runTime:function(b,a,e){e=e||1000;a=a||[];var c=new Date();while(e-->0){b.apply(null,a)}return new Date()-c}});function assert(b,d){if(!b&&Py.debug){var c=arguments;if(c.length>2){var a=2;d=d.replace(/\{([\w$\.\(\)]*?)\}/g,function(f,e){return c.length<=a?f:e+" = "+String.ellipsis(trace.inspect(c[a++]),200)})}else{d=d||"断言失败"}c=arguments.callee.caller;if(Py.stackTrace!==false){while(c.debugStepThrough){c=c.caller}if(c){d+="\r\n--------------------------------------------------------------------\r\n"+String.ellipsis(String.fromUTF8(c.toString()),600)}}if(Py.trace){trace.error(d)}else{throw new Error(d)}}return b}(function(){function b(g,f,e,d){return assert(g,f?f.replace("~",d):d,e)}function a(e,f,d){return b(e(d[0]),d[1],d[0],f)}Object.extend(assert,{isFunction:function(){return a(Object.isFunction,"必须是可执行的函数",arguments)},isArray:function(){return a(Object.isArray,"必须是数组",arguments)},isObject:function(d,e){return b(Object.isObject(d)||Object.isFunction(d),e,d,"必须是引用的对象",arguments)},isNumber:function(d,e){return b(typeof d=="number"||d instanceof Number,e,d,"必须是数字")},isNode:function(d,e){return b(d&&d.nodeType,e,d,"必须是 DOM 节点")},isElement:function(d,e){return b(d&&d.style,e,d,"必须是 Element 对象")},isString:function(d,e){return b(typeof d=="string"||d instanceof String,e,d,"必须是字符串")},isDate:function(d,e){return b(Object.type(d)=="date"||d instanceof Date,e,d,"必须是日期")},isRegExp:function(d,e){return b(Object.type(d)=="regexp"||d instanceof RegExp,e,d,"必须是正则表达式")},notNull:function(d,e){return b(d!=null,e,d,"不可为空")},between:function(f,e,d,g){return b(f>=e&&!(f>=d),g,f,"超出索引, 它必须在 ["+e+", "+(d===undefined?"+∞":d)+") 间")},instanceOf:function(f,g,h){if(!Object.isArray(g)){g=[g]}var e=typeof f,d=Object.type(f);return b(g.filter(function(i){return i==e||i==d}).length,h,f,"类型错误。")},notEmpty:function(d,e){return b(d&&d.length,e,d,"为空")}});b.debugStepThrough=a.debugStepThrough=true;for(var c in assert){assert[c].debugStepThrough=true}})();namespace("System");(function(M){var Q=M.Py,d=M.document,S=Object,aa=S.extend,i=Array.prototype,X=d.createElement("DIV"),Z=M.Element||(M.Element=function(){}),T=Z.prototype,r={},F=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,D=/<(?:script|object|embed|option|style)|\schecked/i,h=/<([\w:]+)/,P={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"]};if(navigator.isQuirks){T.domVersion=1}namespace(".$",navigator.isQuirks?function(o){var e=b(o);if(e&&e.domVersion!==T.domVersion){S.extendIf(e,T)}return e}:b);namespace(".ElementList",Q.Class({xType:"elementlist",constructor:function(e){assert(e&&e.length!==undefined,"ElementList.prototype.constructor(doms): 参数 {doms} 必须是一个 NodeList 或 Array 类型的变量。",e);this.doms=e;if(e[0]&&!e[0].xType){S.update(e,Q.$)}},each:function(o,e){return i.invoke.call(this.doms,o,e)}}));aa(Z,{parse:function(ai,w,o){assert.isString(ai,"Element.parse(html, context, cachable): 参数 {html} ~。");w=w||d;assert(w.createElement,"Element.parse(html, context, cachable): 参数 {context} 必须是一个 Document 对象。",w);var e=r[ai];if(!e||e.ownerDocument!==w){var ah=ai.trim().replace(F,"<$1></$2>"),ak=h.exec(ah),ag=o!==false&&D.test(ai);if(ak){e=w.createElement("div",true);var p=P[ak[1].toLowerCase()];if(p){e.innerHTML=p[1]+ah+p[2];p=p[0];while(p--){e=e.lastChild}}else{e.innerHTML=ah}e=e.firstChild;if(e.nextSibling){var aj=w.createDocumentFragment(),af=e.nextSibling;while(af){aj.appendChild(e);e=af;af=af.nextSibling}aj.appendChild(e);e=aj}else{Q.$(e)}}else{e=w.createTextNode(ai)}}if(!ag){r[ai]=e.clone?e.clone(false,true):e.cloneNode(true)}return e},implementTargets:[T,d],implement:function(p,o,e){assert.notNull(p,"Element.implement(obj, listType): 参数 {obj} ~。");Object.each(p,function(af,w){this.implementTargets.forEach(function(ag){if(!e||!(w in ag)){ag[w]=p[w]}});if(!e||!(w in Q.ElementList.prototype)){switch(o){case 2:af=function(){var ai=this.doms,ag=ai.length,ah=-1;while(++ah<ag){ai[ah][w].apply(ai[ah],arguments)}return this};break;case 3:af=function(){return new Q.ElementList(this.each(w,arguments))};break;case 4:af=function(){var ag=arguments;return new Q.ElementList(Array.plain.apply(Array,this.each(function(aj,ah){var ai=this[ah][w].apply(this[ah],ag);return ai&&ai.doms||ai},this.doms)))};break;case 5:af=function(){var ag=arguments;return !i.each.call(this.doms,function(ah){return !ah[w].apply(ah[w],ag)})};break;default:af=function(){return this.each(w,arguments)}}Q.ElementList.prototype[w]=af}},this);if(T.domVersion){T.domVersion++}return this},implementIf:function(o,e){return this.implement(o,e,true)},getDocument:ad}).implementIf({addEventListener:Q.addEventListener,removeEventListener:Q.removeEventListener,xType:"element"},2);assert.isNode(d.documentElement,"在 element.js 执行时，必须存在 document.documentElement 属性。请确认浏览器为标准浏览器。");S.extendIf(d,{create:function(e,o){assert.isString(e,"document.create(tagName, className): 参数 {tagName} ~。");var p=Q.$(d.createElement(e));p.className=o;return p},getDom:function(){return arguments.length===1?Q.$(arguments[0]):new Q.ElementList(arguments)},defaultView:d.parentWindow,dom:d.documentElement});function ad(e){assert.isNode(e,"Element.getDocument(elem): 参数 {elem} ~。");return e.ownerDocument||e.document||e}function b(e){return typeof e=="string"?d.getElementById(e):e}namespace(".Events.element.$default",{trigger:function(w,p,o,af){af=new Q.Event(w,p,af);return o(af)||(w[p="on"+p]&&w[p](af)!==false)},initEvent:Function.empty,add:function(p,o,e){p.addEventListener(o,e,false)},remove:function(p,o,e){p.removeEventListener(o,e,false)}});Z.defineEvents=function(w,o,p){var e=Q.Events.element;delete e[w];String.map(w,Function.from(!S.isFunction(o)?{initEvent:p?function(af){return e[o].initEvent.call(this,af)!==false&&p.call(this,af)}:e[o].initEvent,add:function(ah,ag,af){ah.addEventListener(o,af,false)},remove:function(ah,ag,af){ah.removeEventListener(o,af,false)}}:S.extendIf({initEvent:o},e.$default)),e);return arguments.callee};var U=namespace(".Event",Class({constructor:function(af,o,w){var p=this;p.target=af;p.srcElement=af.dom||af;p.type=o;if(w){aa(p,w)}},stopPropagation:function(){this.cancelBubble=true},preventDefault:function(){this.returnValue=false},stop:function(){this.stopPropagation();this.preventDefault()}})).prototype,f,A,ae;if(navigator.isStd){M.Event.prototype.stop=U.stop;A=ae=f=function(o){if(!o.srcElement){o.srcElement=o.target.nodeType===3?o.target.parentNode:o.target}}}else{f=function(o){if(!o.preventDefault){o.target=o.srcElement?Q.$(o.srcElement):(o.srcElement=d);o.stopPropagation=U.stopPropagation;o.preventDefault=U.preventDefault;o.stop=U.stop}};A=function(o){if(!o.preventDefault){f(o);o.relatedTarget=o.fromElement===o.target?o.toElement:o.fromElement;var p=ad(o.target).dom;o.pageX=o.clientX+p.scrollLeft;o.pageY=o.clientY+p.scrollTop;o.layerX=o.x;o.layerY=o.y;o.which=(o.button&1?1:(o.button&2?3:(o.button&4?2:0)))}};ae=function(o){if(!o.preventDefault){f(o);o.which=o.keyCode}}}Z.defineEvents("click dblclick mouseup mousedown contextmenu mouseover mouseout mousemove selectstart selectend mouseenter mouseleave",A)("mousewheel DOMMouseScroll blur focus focusin focusout scroll change select submit error",f)("keydown keypress keyup",ae)("load unload",function(o){this.un(o.type)});if(navigator.isFirefox){Z.defineEvents("mousewheel","DOMMouseScroll")}if(!navigator.isIE){function R(p){var o=p.relatedTarget;while(o&&o!=this){o=o.parentNode}return this!=o}Z.defineEvents("mouseenter","mouseover",R)("mouseleave","mouseout",R)}Z.implement(Q.IEvent,2);var I=/opacity=([^)]*)/,B=/^-?\d+(?:px)?$/i,y=/^-?\d/,K=/^on(\w+)/,x=/\-|float/,t="borderTopWidth",E="borderLeftWidth",V=d.defaultView.getComputedStyle,N=V?function(p,o){assert.isElement(p,"Element.getStyle(elem, name): 参数 {elem} ~。");var e=p.ownerDocument.defaultView.getComputedStyle(p,null);return e?e[o]:null}:function(af,o){assert.isElement(af,"Element.getStyle(elem, name): 参数 {elem} ~。");if(o in C){switch(o){case"height":return af.offsetHeight===0?"auto":af.offsetHeight-Z.getSizes(af,"y","pb")+"px";case"width":return af.offsetWidth===0?"auto":af.offsetWidth-Z.getSizes(af,"x","pb")+"px";case"opacity":return T.getOpacity.call(af).toString()}}var w=af.currentStyle[o];if(!B.test(w)&&y.test(w)){var p=af.style,ag=p.left,e=af.runtimeStyle.left;af.runtimeStyle.left=af.currentStyle.left;p.left=o==="fontSize"?"1em":(w||0);w=p.pixelLeft+"px";p.left=ag;af.runtimeStyle.left=e}return w},C={"float":"cssFloat" in X.style?"cssFloat":"styleFloat",height:"setHeight",width:"setWidth"},L={innerText:"innerText" in X?"innerText":"textContent","for":"htmlFor","class":"className"};aa(Z,{getStyle:N,styleString:s,styleNumber:a,getSizes:V?function(w,p,ah){assert.isElement(w,"Element.getSizes(elem, type, names): 参数 {elem} ~。");assert(p in Z.styleMaps,'Element.getSizes(elem, type, names): 参数 {type} 必须是 "x" 或 "y"。',p);assert.isString(ah,"Element.getSizes(elem, type, names): 参数 {names} ~。");var af=0,ag=Z.styleMaps[p],o=ah.length,ai,e=w.ownerDocument.defaultView.getComputedStyle(w,null);while(o--){ai=ag[ah.charAt(o)];af+=(parseFloat(e[ai[0]])||0)+(parseFloat(e[ai[1]])||0)}return af}:function(p,o,ag){assert.isElement(p,"Element.getSizes(elem, type, names): 参数 {elem} ~。");assert(o in Z.styleMaps,'Element.getSizes(elem, type, names): 参数 {type} 必须是 "x" 或 "y"。',o);assert.isString(ag,"Element.getSizes(elem, type, names): 参数 {names} ~。");var w=0,af=Z.styleMaps[o],e=ag.length,ah;while(e--){ah=af[ag.charAt(e)];w+=(parseFloat(N(p,ah[0]))||0)+(parseFloat(N(p,ah[1]))||0)}return w},styles:C,attributes:L,styleMaps:{},display:{position:"absolute",visibility:"visible",display:"block"},styleNumbers:String.map("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom",Function.returnTrue,{}),zIndex:10000,show:function(e){e.style.display="";if(N(e,"display")==="none"){e.style.display=Q.getData(e,"display")||"block"}},hide:function(e){var o=s(e,"display");if(o!=="none"){Q.setData(e,"display",o);e.style.display="none"}},getAttr:function(p,e){assert.isNode(p,"Element.getAttr(elem, name): 参数 {elem} ~。");if(e in L){if(navigator.isQuirks&&/^(href|src)$/.test(e)){return p.getAttribute(e,2)}e=L[e]}if(e in p){if(p.nodeName==="FORM"){var o=p.getAttributeNode(e);return o&&o.nodeValue}return p[e]}return p.getAttribute(e)},hasClass:function(o,e){assert.isNode(o,"Element.hasClass(elem, className): 参数 {elem} ~。");return(" "+o.className+" ").indexOf(" "+e+" ")>=0},getStyles:function(w,p){assert.isElement(w,"Element.getStyles(elem, styles): 参数 {elem} ~。");var o={};for(var e in p){o[e]=w.style[e]}return o},setStyles:function(o,e){assert.isElement(o,"Element.getStyles(elem, styles): 参数 {elem} ~。");S.extend(o.style,e)}}).implement({getStyle:function(e){assert.isString(e,"Element.prototypgetStyle(name): 参数 {name} ~。");var o=this.dom||this;return o.style[e=e.toCamelCase()]||N(o,e)},getOpacity:!("opacity" in X.style)?function(){return I.test(s(this.dom||this,"filter"))?parseInt(RegExp.$1)/100:1}:function(){return a(this.dom||this,"opacity")},getAttr:function(e){return Z.getAttr(this.dom||this,e)},hasClass:function(e){return Z.hasClass(this.dom||this,e)},getText:function(){var o=this.dom||this;switch(o.tagName){case"SELECT":if(o.type!="select-one"){var e=[];S.each(o.options,function(p){if(p.selected){e.push(p.value)}});return e.join(",")}case"INPUT":case"TEXTAREA":return o.value;default:return o[L.innerText]}},getHtml:function(){return(this.dom||this).innerHTML},isHidden:function(){var e=this.dom||this;return(e.style.display||N(e,"display"))==="none"}}).implement({setStyle:function(e,w){assert.isString(e,"Element.prototype.setStyle(name, value): 参数 {name} ~。");var p=this,o=(p.dom||p).style;if(arguments.length==1){o.cssText=e}else{if(e in C){e=C[e];if(p[e]){return p[e](w)}}else{e=e.toCamelCase();if(typeof w==="number"&&!(e in Z.styleNumbers)){w+="px"}}o[e]=w}return p},setOpacity:!("opacity" in X.style)?function(o){var e=(this.dom||this).style;assert(o<=1&&o>=0,"Element.prototype.setOpacity(value): 参数 {value} 必须在 0~1 间。",o);e.zoom=1;e.filter=(e.filter||"alpha(opacity=?)").replace(I,"opacity="+o*100);return this}:function(e){assert(e<=1&&e>=0,"Element.prototype.setOpacity(value): 参数 {value} 必须在 0~1 间。",e);(this.dom||this).style.opacity=e;return this},setAttr:function(e,p){var o=this.dom||this;e=L[e]||e;if(e in o){assert(e!="type"||o.nodeName!="INPUT"||!o.parentNode,"此元素 type 属性不能修改");o[e]=p}else{if(p===null){o.removeAttribute(e)}else{o.setAttribute(e,p)}}return this},set:function(e,p){var o=this;if(typeof e==="string"){var w=o.dom||o;if(e.match(K)){o.on(RegExp.$1,p)}else{if(w.style&&(e in w.style||x.test(e))){o.setStyle(e,p)}else{if(e in w){w[e]=p}else{o[e]=p}}}}else{if(S.isObject(e)){for(p in e){o.set(p,e[p])}}}return o},addClass:function(e){var o=this.dom||this;if(!o.className){o.className=e}else{o.className+=" "+e}return this},removeClass:function(e){var o=this.dom||this;o.className=e?o.className.replace(new RegExp("\\b"+e+"\\b\\s*","g"),""):"";return this},toggleClass:function(o,e){return(e!==undefined?!e:this.hasClass(o))?this.removeClass(o):this.addClass(o)},setText:function(o){var e=this.dom||this;switch(e.tagName){case"SELECT":if(e.type==="select-multiple"&&o){assert.isString(o,"Element.prototype.setText(value): 参数  {value} ~。");o=o.split(",");S.each(e.options,function(p){p.selected=o.indexOf(p.value)>-1})}case"INPUT":case"TEXTAREA":e.value=o;break;default:e[L.innerText]=o}return this},setHtml:function(e){(this.dom||this).innerHTML=e;return this},animate:function(){var e=arguments,o=e[1];if(typeof e[0]==="string"){(e[1]={})[e[0]]=o;e[0]=null}else{if(typeof o!=="object"){i.unshift.call(e,null)}}this.set(e[1]);if(e[4]){e[4].call(this)}if(e[3]){setTimeout(e[3],0)}return this},show:function(o,e){Z.show(this.dom||this);if(e){setTimeout(e,0)}return this},hide:function(o,e){Z.hide(this.dom||this);if(e){setTimeout(e,0)}return this},toggle:function(w,p,o,e){return this[(e===undefined?this.isHidden():e)?"show":"hide"](w,p,o)},setUnselectable:"unselectable" in X?function(e){(this.dom||this).unselectable=e!==false?"on":"";return this}:"onselectstart" in X?function(e){(this.dom||this).onselectstart=e!==false?Function.returnFalse:null;return this}:function(e){(this.dom||this).style.MozUserSelect=e!==false?"none":"";return this},bringToFront:function(o){assert(!o||(o.dom&&o.dom.style)||o.style,"Element.prototype.bringToFront(elem): 参数 {elem} 必须为 元素或为空。",o);var e=this.dom||this;e.style.zIndex=Math.max(parseInt(s(e,"zIndex"))||0,o&&(parseInt(s(o.dom||o,"zIndex"))+1)||Z.zIndex++);return this}},2);String.map("x y",function(p,o){p=Z.styleMaps[p]={};var e=o?["Top","Bottom"]:["Left","Right"];p.d=e.invoke("toLowerCase",[]);String.map("padding~ margin~ border~Width",function(w){p[w.charAt(0)]=[w.replace("~",e[0]),w.replace("~",e[1])]})});String.map("href src defaultValue accessKey cellPadding cellSpacing rowSpan colSpan frameBorder maxLength readOnly tabIndex useMap contentEditable",function(e){L[e.toLowerCase()]=e});if(!("opacity" in X.style)){C.opacity="setOpacity"}function s(o,e){return o.style[e]||N(o,e)}function a(p,e){var w=parseFloat(p.style[e]);if(!w&&w!==0){w=parseFloat(N(p,e))}if(!w&&w!==0){if(e in C){var o=Z.getStyles(p,Z.display);Z.setStyles(p,Z.display);w=parseFloat(N(p,e))||0;Z.setStyles(p,o)}else{w=0}}return w}var g=/^(?:body|html)$/i,v=namespace(".Point",Q.Class({constructor:function(e,o){this.x=e;this.y=o},add:function(e,o){assert(typeof e=="number"&&typeof o=="number","Point.prototype.add(x, y): 参数 x 和 参数 y 必须是数字。");this.x+=e;this.y+=o;return this},minus:function(e){assert(e&&"x" in e&&"y" in e,"Point.prototype.minus(p): 参数 {p} 必须有 'x' 和 'y' 属性。",e);this.x-=e.x;this.y-=e.y;return this},clone:function(){return new v(this.x,this.y)}})),z="pageXOffset" in M?function(){var e=this.defaultView;return new v(e.pageXOffset,e.pageYOffset)}:u;aa(Z,{setMovable:function(e){assert.isElement(e,"Element.setMovable(elem): 参数 elem ~。");if(!W(e,"absolute")){e.style.position="relative"}},checkPosition:W,getXY:j}).implement({getScrollSize:function(){var e=this.dom||this;return new v(e.scrollWidth,e.scrollHeight)},getSize:function(){var e=this.dom||this;return new v(e.offsetWidth,e.offsetHeight)},getOuterSize:function(){var e=this.dom||this;return this.getSize().add(Z.getSizes(e,"x","m"),Z.getSizes(e,"y","m"))},getOffset:function(){var e=this.dom||this,p=e.style.left,o=e.style.top;if(!p||!o){if(W(e,"absolute")){return this.getOffsets(this.getOffsetParent())}p=N(e,"left");o=N(e,"top")}return new v(parseFloat(p)||0,parseFloat(o)||0)},getWidth:function(){return a(this.dom||this,"width")},getHeight:function(){return a(this.dom||this,"height")},getScroll:u,getBound:function(){var o=this.getPosition(),e=this.getSize();return{left:o.x,top:o.y,width:e.x,height:e.y,right:o.x+e.x,bottom:o.y+e.y}},getPosition:X.getBoundingClientRect?function(){var w=this.dom||this,p=w.getBoundingClientRect(),af=ad(w),e=af.dom,o=W(w,"fixed")?{x:0,y:0}:af.getScroll();return new v(p.left+o.x-e.clientLeft,p.top+o.y-e.clientTop)}:function(){var w=this.dom||this,o=w,ag=l(o);while(o&&!c(o)){ag.add(o.offsetLeft,o.offsetTop);if(navigator.isFirefox){if(n(o)){af(o)}var e=o.parentNode;if(e&&s(e,"overflow")!="visible"){af(e)}}else{if(o!=w&&navigator.isSafari){af(o)}}o=o.offsetParent}if(navigator.isFirefox&&n(w)){ag.add(-a(w,E),-a(w,t))}function af(p){ag.add(a(p,E),a(p,t))}return ag},getOffsets:function(o){var p,e=this.dom||this;if(c(e)){return new v(0,0)}p=this.getPosition().minus(l(e));if(o){o=o.dom||Q.$(o);assert.isElement(o,"Element.prototype.getOffsets(relative): 参数 {relative} ~。");p.minus(o.getOffsets()).add(-a(e,"marginLeft")-a(o,E),-a(e,"marginTop")-a(o,t))}return p},getOffsetParent:function(){var o=this.dom||this,e=o.offsetParent||ad(o).body;while(e&&!c(e)&&W(e,"static")){e=e.offsetParent}return e}}).implement({setSize:function(e,o){return H(this,"pb",e,o)},setOuterSize:function(e,o){return H(this,"mpb",e,o)},setWidth:function(e){(this.dom||this).style.width=e>0?e+"px":e<=0?"0px":"";return this},setHeight:function(e){(this.dom||this).style.height=e>0?e+"px":e<=0?"0px":"";return this},setScroll:function(e,af){var o=this.dom||this,w=j(e,af);if(w.x!=null){o.scrollLeft=w.x}if(w.y!=null){o.scrollTop=w.y}return this},setOffset:function(o){assert(S.isObject(o)&&"x" in o&&"y" in o,"Element.prototype.setOffset(p): 参数 {p} 必须有 'x' 和 'y' 属性。",o);var e=(this.dom||this).style;e.top=o.y+"px";e.left=o.x+"px";return this},setPosition:function(e,ag){var o=this,af=o.getOffset().minus(o.getPosition()),w=j(e,ag);if(w.x){af.x+=w.x}if(w.y){af.y+=w.y}Z.setMovable(o.dom||o);return o.setOffset(af)}},2);aa(d,{getSize:function(){var e=this.dom;return new v(e.clientWidth,e.clientHeight)},getScroll:z,getPosition:z,getScrollSize:function(){var w=this.dom,p=this.getSize(),o=Math.max,e=this.body;return new v(o(w.scrollWidth,e.scrollWidth,p.x),o(w.scrollHeight,e.scrollHeight,p.y))},setScroll:function(e,w){var o=k(e,w,this,"getScroll");this.defaultView.scrollTo(o.x,o.y);return this}});function W(o,e){return s(o,"position")===e}function u(){var e=this.dom||this;return new v(e.scrollLeft,e.scrollTop)}function c(e){return g.test(e.nodeName)}function H(w,o,e,ag){var af=j(e,ag);if(af.x!=null){w.setWidth(af.x-Z.getSizes(w.dom||w,"x",o))}if(af.y!=null){w.setHeight(af.y-Z.getSizes(w.dom||w,"y",o))}return w}function n(e){return s(e,"MozBoxSizing")!="border-box"}function j(e,o){return e&&typeof e==="object"?e:{x:e,y:o}}function k(e,ag,w,af){var o=j(e,ag);if(o.x==null){o.x=w[af]().x}if(o.y==null){o.x=w[af]().y}assert(!isNaN(o.x)&&!isNaN(o.y),"adaptXY(x, y, obj, method): 参数 {x}或{y} 不是合法的数字。(method = {method})",e,ag,af);return o}function l(e){var o=new v(0,0);e=e.parentNode;while(e&&!c(e)){o.add(-e.scrollLeft,-e.scrollTop);e=e.parentNode}return o}var ac=/^\[\s*([^=]+?)(\s*=\s*(['"])([\s\S]*)\3)?\s*\]$/,Y="firstElementChild" in X?[q,"nextElementSibling","firstElementChild","parentNode","previousElementSibling","lastElementChild"]:[q,"nextSibling","firstChild","parentNode","previousSibling","lastChild"],O="all" in X?function(o,e){assert.isFunction(e,"Element.prototype.find(elem, fn): 参数 {fn} ~。");return i.filter.call(o.all,e)}:function(w,o){assert.isFunction(o,"Element.prototype.find(elem, fn): 参数 {fn} ~。");if(!w.firstChild){return[]}var ag=[],af=[w],ah,e;while(af.length){ah=af.pop();e=ah.firstChild;do{if(e.nodeType!=1){continue}if(o(e)){ag.push(e)}if(e.firstChild){af.push(e)}}while(e=e.nextSibling)}return ag};aa(Z,{hasChild:!X.compareDocumentPosition?function(e,o){assert.isNode(e,"Element.hasChild(elem, child): 参数 {elem} ~。");assert.isNode(o,"Element.hasChild(elem, child): 参数 {child} ~。");while(o=o.parentNode){if(e===o){return true}}return false}:function(e,o){assert.isNode(e,"Element.hasChild(elem, child): 参数 {elem} ~。");assert.isNode(o,"Element.hasChild(elem, child): 参数 {child} ~。");return !!(e.compareDocumentPosition(o)&16)},empty:function(e){assert.isNode(e,"Element.empty(elem): 参数 {elem} ~。");while(e.lastChild){Z.dispose(e.lastChild)}},dispose:function(e){assert.isNode(e,"Element.dispose(elem): 参数 {elem} ~。");if(e.clearAttributes){e.clearAttributes()}Q.IEvent.un.call(e);if(e.$data){e.$data=null}Z.empty(e);e.parentNode&&e.parentNode.removeChild(e)},properties:{INPUT:"checked",OPTION:"selected",TEXTAREA:"value"},nodeMaps:{children:[function(o,e){return new Q.ElementList(O(o,e))}],parent:[q,Y[3],Y[3]],child:[ab,Y[1],Y[2]],next:[q,Y[1]],previous:[q,Y[4],Y[4]],first:Y,last:[q,Y[4],Y[5]],parents:[ab,Y[3]],previouses:[ab,Y[4]],nexts:[ab,Y[1]],odd:[function(o,e){return ab(o,function(){return e=e===false},Y[1],Y[2])}],siblings:[function(o,e){return ab(o,function(p){return p!=o&&e(o)},Y[1],Y[2])}]}}).implementIf({getElementsByAttribute:function(e,o){return O(this.dom||this,o===undefined?function(p){return !!Z.getAttr(p,e)}:function(p){return Z.getAttr(p,e)===o})},getElementsByClassName:function(e){assert.isString(e,"Element.prototype.getElementsByClassName(classname): 参数 {classname} ~。");e=e.split(/\s/);return O(this.dom||this,function(p){var o=e.length;while(o--){if(!Z.hasClass(p,e[o])){return false}}return true})},getElementsByTagName:function(e){return this.getElementsByTagName(e)},getElementsByName:function(e){return this.getElementsByAttribute("name",e)},findAll:X.querySelectorAll?function(e){assert.isString(e,"Element.prototype.findAll(selecter): 参数 {selecter} ~。");return new Q.ElementList((this.dom||this).querySelectorAll(e))}:function(e){assert.isString(e,"Element.prototype.findAll(selecter): 参数 {selecter} ~。");var o=new Q.ElementList([this.dom||this]);e.split(" ").forEach(function(p){o=G(o,p)});return o},get:function(o,e){switch(typeof o){case"string":e=e?m(e):Function.returnTrue;break;case"function":e=o;o="children";break;case"number":e=m(o);o="first"}var p=Z.nodeMaps[o];assert(p,"Element.prototype.get(type, fn): 函数不支持 {0}类型 的节点关联。",o);return p[0](this.dom||this,e,p[1],p[2])}},4).implement({contains:function(o){var e=this.dom||this;assert.isNode(e,"Element.prototype.contains(child): this.dom || this 返回的必须是 DOM 节点。");assert.notNull(o,"Element.prototype.contains(child):参数 {child} ~。");o=o.dom||o;return o==e||Z.hasChild(e,o)},hasChild:function(o){var e=this.dom||this;return o?Z.hasChild(e,o.dom||o):e.firstChild!==null}},5).implement({find:X.querySelector?function(e){assert.isString(e,"Element.prototype.find(selecter): 参数 {selecter} ~。");return(this.dom||this).querySelector(e)}:function(e){var o=this.dom||this;assert.isString(e,"Element.prototype.find(selecter): 参数 {selecter} ~。");if(e.split(" ").each(function(p){return !!(o=G(o,p)[0])})){return Q.$(o)}},clone:function(o,af,e){assert.isNode(this.dom||this,"Element.prototype.clone(copyDataAndEvent, contents, keepid): this.dom || this 返回的必须是 DOM 节点。");var w=this.dom||this,ai=w.cloneNode(af=af!==false);if(af){for(var ag=ai.getElementsByTagName("*"),ah=w.getElementsByTagName("*"),p=ag.length;p--;){J(ag[p],ah[p],o,e)}}J(w,ai,o,e);if(navigator.isQuirks){S.update(w.getElementsByTagName("object"),"outerHTML",ai.getElementsByTagName("object"),true)}return ai},insert:"insertAdjacentElement" in X?function(o,e){var p=this.dom||this;assert.isNode(p,"Element.prototype.insert(html, swhere): this.dom || this 返回的必须是 DOM 节点。");assert.notNull(o,"Element.prototype.insert(html, swhere): 参数  {html} ~。");assert(!e||"afterEnd beforeBegin afterBegin beforeEnd ".indexOf(e+" ")!=-1,"Element.prototype.insert(html, swhere): 参数  {swhere} 必须是 beforeBegin、beforeEnd、afterBegin 或 afterEnd 。",e);if(typeof o==="string"){p.insertAdjacentHTML(e,o)}else{p.insertAdjacentElement(e,o.dom||o)}switch(e){case"afterEnd":o=p.nextSibling;break;case"beforeBegin":o=p.previousSibling;break;case"afterBegin":o=p.firstChild;break;default:o=p.lastChild;break}return Q.$(o)}:function(o,e){var p=this.dom||this;assert.notNull(o,"Element.prototype.insert(html, swhere): 参数 {html} ~。");assert.isNode(p,"Element.prototype.insert(html, swhere): this.dom || this 返回的必须是 DOM 节点。");assert(!e||"afterEnd beforeBegin afterBegin beforeEnd ".indexOf(e+" ")!=-1,"Element.prototype.insert(html, swhere): 参数 {swhere} 必须是 beforeBegin、beforeEnd、afterBegin 或 afterEnd 。",e);if(!o.nodeType){o=o.dom||Z.parse(o,ad(p))}switch(e){case"afterEnd":if(!p.nextSibling){assert(p.parentNode!=null,"Element.prototype.insert(html, swhere): 节点无父节点时无法插入 {this}",p);p.parentNode.appendChild(o);break}p=p.nextSibling;case"beforeBegin":assert(p.parentNode!=null,"Element.prototype.insert(html, swhere): 节点无父节点时无法插入 {this}",p);p.parentNode.insertBefore(o,p);break;case"afterBegin":if(p.firstChild){p.insertBefore(o,p.firstChild);break}default:assert(arguments.length==1||!e||e=="beforeEnd"||e=="afterBegin","Element.prototype.insert(html, swhere): 参数 {swhere} 必须是 beforeBegin、beforeEnd、afterBegin 或 afterEnd 。",e);p.appendChild(o);break}return o},append:function(e){var o=this;assert.notNull(e,"Element.prototype.append(html, escape): 参数 {html} ~。");if(!e.nodeType){e=e.dom||Z.parse(e,ad(o.dom||o))}assert.isNode(e,"Element.prototype.append(html, escape): 参数 {html} 不是合法的 节点或 HTML 片段。");return o.appendChild(e)},wrapWith:function(e){e=this.replaceWith(e);while(e.lastChild){e=e.lastChild}e.appendChild(this.dom||this);return e},replaceWith:function(e){var o=this.dom||this;assert.notNull(e,"Element.prototype.replaceWith(html): 参数 {html} ~。");if(!e.nodeType){e=e.dom||Z.parse(e,ad(o))}assert(o.parentNode,"Element.prototype.replaceWith(html): 当前节点无父节点，不能执行此方法 {this}",o);assert.isNode(e,"Element.prototype.replaceWith(html, escape): 参数 {html} ~或 HTM 片段。");o.parentNode.replaceChild(e,o);return e}},3).implement({renderTo:function(o){o=o&&o!==true?Q.$(o):d.body;assert(o.appendChild,"Element.prototype.renderTo(elem): 参数 {elem} ~ 必须是 DOM 节点或控件。");var e=this.dom||this;if(e.parentNode!==o){o.appendChild(e)}return this},remove:function(o){var e=this.dom||this;assert(!o||this.hasChild(o.dom||o),"Element.prototype.remove(child): 参数 {child} 不是当前节点的子节点",o);o?this.removeChild(o.dom||o):(e.parentNode&&e.parentNode.removeChild(e));return this},empty:function(){Z.empty(this.dom||this);return this},dispose:function(){Z.dispose(this.dom||this)}},2);function q(p,o,e,w){p=p[w];while(p){if(p.nodeType==1&&o(p)){return Q.$(p)}p=p[e]}return null}function ab(p,o,e,af){p=p[af||e];var w=[];while(p){if(p.nodeType==1&&o(p)){w.push(p)}p=p[e]}return new Q.ElementList(w)}function J(p,w,o,e){if(!e){w.removeAttribute("id")}if(w.mergeAttributes){w.clearAttributes();w.mergeAttributes(p);w.removeAttribute("$data");if(p.options){S.update(p.options,"selected",w.options,true)}}if(o){Q.cloneData(w,p)}var af=Z.properties[p.tagName];if(af){w[af]=p[af]}}function G(p,e){switch(e.charAt(0)){case".":p=p.getElementsByClassName(e.replace(/\./g," "));break;case"[":var o=ac.exec(e);assert(o&&o[1],"Element.prototype.find(selector): 参数 {selector} 不是合法的选择器。 属性选择器如: [checked='checked']",e);p=p.getElementsByAttribute(o[1],o[4]);break;default:p=p.getElementsByTagName(e);break}return p}function m(o){var e;switch(typeof o){case"number":e=o;o=function(p){return --e<0};break;case"string":e=o.toUpperCase();o=function(p){return p.tagName===e}}assert.isFunction(o,"Element.prototype.get(type, fn): 参数 {fn} 必须是一个函数、数字或字符串。",o);return o}try{d.execCommand("BackgroundImageCache",false,true)}catch(Z){}X=null})(this);namespace("System.Dom.Element");(function(d){var b={},c=Function.empty;function a(){var e=this.length;while(--e>=0){this[e].step()}}namespace(".Fx.",{Base:d.Class({fps:50,duration:500,link:"ignore",xType:"fx",constructor:function(){this._competeListeners=[]},transition:function(e){return -(Math.cos(Math.PI*e)-1)/2},compile:function(g,f){var e=this;e.from=g;e.to=f;return e},step:function(){var e=this,f=Date.now()-e.time;if(f<e.duration){e.set(e.transition(f/e.duration))}else{e.set(1);e.complete()}},set:Function.empty,onReady:function(e){assert.isFunction(e,"Fx.Base.prototype.onReady(fn): 参数 {fn} ~。");this._competeListeners.unshift(e);return this},check:function(){var f=this,e=arguments;if(f.timer){switch(e[5]||f.link){case"wait":this._competeListeners.unshift(function(){this.start.apply(this,e);return false});return false;case"restart":f.pause();while(f._competeListeners.pop()){}break;case"cancel":f.stop();break;case"replace":f.pause();break;default:return false}}return true},start:function(){var f=this,e=arguments;if(f.check.apply(f,e)){if(e[2]>0){this.duration=e[2]}if(e[3]){assert.isFunction(e[3],"Fx.Base.prototype.start(from, to, duration, onStop, onStart, link): 参数 {callback} ~。");f._competeListeners.push(e[3])}if(e[4]&&e[4].apply(f,e)===false){return f.complete()}f.time=0;f.compile(e[0],e[1]).set(0);f.resume()}return f},complete:function(){var f=this;f.pause();var e=f._competeListeners;while(e.length){if(e.pop().call(f)===false){return f}}return f},stop:function(){var e=this;e.set(1);e.pause();return e},pause:function(){var e=this;if(e.timer){e.time=Date.now()-e.time;var g=e.fps,f=b[g];f.remove(e);if(f.length===0){clearInterval(e.timer);delete b[g]}e.timer=undefined}return e},resume:function(){var e=this;if(!e.timer){e.time=Date.now()-e.time;var g=e.fps,f=b[g];if(f){f.push(e);e.timer=f[0].timer}else{e.timer=setInterval(Function.bind(a,b[g]=[e]),Math.round(1000/g))}}return e}}),compute:function(g,f,e){return(f-g)*e+g}})})(Py);namespace("System.Fx.Base");using("System.Dom.Element");using("System.Fx.Base");(function(d){var j=/^#([\da-f]{1,2})([\da-f]{1,2})([\da-f]{1,2})$/i,t=/(\d+),\s*(\d+),\s*(\d+)/;Object.extend(String,{hexToArray:function(u){assert.isString(u,"String.hexToArray(hex): 参数 {hex} ~。");if(u=="transparent"){return[255,255,255]}var c=u.match(j);if(!c){return null}var e=0,p=[];while(++e<=3){var v=c[e];p.push(parseInt(v.length==1?v+v:v,16))}return p},rgbToArray:function(e){assert.isString(e,"String.rgbToArray(rgb): 参数 {rgb} ~。");var c=e.match(t);if(!c){return null}var p=0,u=[];while(++p<=3){u.push(parseInt(c[p]))}return u},arrayToHex:function(c){assert.isArray(c,"String.arrayToHex(rgb): 参数 {rgb} ~。");var e=-1,p=[];while(++e<3){var u=c[e].toString(16);p.push((u.length==1)?"0"+u:u)}return"#"+p.join("")}});var k=Element,g=d.Fx,m=g.compute,h=namespace(".Fx.Animate",d.Fx.Base.extend({dom:null,current:null,link:"wait",constructor:function(c){this.dom=c;this._competeListeners=[]},set:function(v){var e=this,c,u=e.dom,p;for(c in e.current){p=e.current[c];p.parser.set(u,c,p.from,p.to,v)}},compile:function(v,w){assert.notNull(v,"Fx.Animate.prototype.start(from, to, duration, callback, link): 参数 {from} ~。");assert.notNull(w,"Fx.Animate.prototype.start(from, to, duration, callback, link): 参数 {to} ~。");var p=this,x,c=h.cachedParsers;p.current={};for(x in w){var u=undefined,y=v[x],z=w[x],e=c[x=x.toCamelCase()];if(!e){for(e in h.parsers){e=h.parsers[e];u=e.parse(z,x);if(u||u===0){p.dom=p.dom.dom||p.dom;c[x]=e;break}}}if(e){p.current[x]={from:e.parse((y?y==="auto":y!==0)?e.get(p.dom,x):y),to:u===undefined?e.parse(z,x):u,parser:e};assert(p.current[x].from!==null&&p.current[x].to!==null,"Animate.prototype.complie(from, to): 无法正确获取属性 {key} 的值({from} {to})。",x,p.current[x].from,p.current[x].to)}}return p}}));h.cachedParsers={opacity:{set:function(e,c,v,u,p){e.setOpacity(m(v,u,p))},parse:r,get:function(c){return c.getOpacity()}},scrollTop:{set:function(e,c,v,u,p){e.setScroll(null,m(v,u,p))},parse:r,get:function(c){return c.getScroll().y}},scrollLeft:{set:function(e,c,v,u,p){e.setScroll(m(v,u,p))},parse:r,get:function(c){return c.getScroll().x}}};h.parsers={number:{set:!navigator.isStd?function(u,c,x,w,v){try{u.style[c]=m(x,w,v)}catch(p){}}:function(e,c,v,u,p){e.style[c]=m(v,u,p)+"px"},parse:function(c){return typeof c=="number"?c:parseFloat(c)},get:k.styleNumber},color:{set:function o(e,c,v,u,p){e.style[c]=String.arrayToHex([Math.round(m(v[0],u[0],p)),Math.round(m(v[1],u[1],p)),Math.round(m(v[2],u[2],p))])},parse:function(c){return String.hexToArray(c)||String.rgbToArray(c)},get:k.getStyle}};function r(c){return c}var q="height marginTop paddingTop marginBottom paddingBottom",l=h.maps={all:q+" opacity width",opacity:"opacity",height:q,width:"width marginLeft paddingLeft marginRight paddingRight"},s=k.prototype,b=s.animate,n=s.show,i=s.hide;Object.update(l,function(c){return String.map(c,Function.from(0),{})});String.map("left right top bottom",Function.from({$slide:true}),l);k.implement({fx:function(){return d.getData(this,"fx")||d.setData(this,"fx",new d.Fx.Animate(this))}}).implement({animate:function(){var c=arguments,e=c[1];if(typeof c[0]==="string"){(c[1]={})[c[0]]=e;c[0]={}}else{if(typeof e!=="object"){Array.prototype.unshift.call(c,{})}}if(c[2]!==0){e=this.fx();e.start.apply(e,c)}else{b.apply(this,c)}return this},show:function(v,u,e){var p=this;if(v){var w=p.dom||p,c={};p.fx().start(a(w,e),{},v,function(){Element.setStyles(w,c);if(u){u.call(p,true)}},function(z,y){if(!p.isHidden()){return false}k.show(w);if(z.$slide){f(z,w,e,c)}else{c.overflow=w.style.overflow;w.style.overflow="hidden"}for(var x in z){c[x]=w.style[x];y[x]=k.styleNumber(w,x)}})}else{n.apply(p,arguments)}return p},hide:function(v,u,e){var p=this;if(v){var w=p.dom||p,c={};p.fx().start({},a(w,e),v,function(){k.hide(w);k.setStyles(w,c);if(u){u.call(p,false)}},function(z,y){if(p.isHidden()){return false}if(y.$slide){f(y,w,e,c)}else{c.overflow=w.style.overflow;w.style.overflow="hidden"}for(var x in y){c[x]=w.style[x]}})}else{i.apply(p,arguments)}return this},highlight:function(c,p,e){assert(!c||Object.isArray(c)||j.test(c)||t.test(c),"Element.prototype.highlight(color, duration, callBack): 参数 {color} 不是合法的颜色。",c);assert(!e||Object.isFunction(e),"Element.prototype.highlight(color, duration, callBack): 参数 {callBack} 不是可执行的函数。",e);var v={},u={backgroundColor:c||"#ffff88"};p/=2;this.fx().start(v,u,p,null,function(w){w.backgroundColor=k.getStyle(this.dom.dom||this.dom,"backgroundColor")}).start(u,v,p,e);return this}},2);function a(e,c){return Object.extend({},l[c||"all"])}function f(c,w,p,e){delete c.$slide;w.parentNode.style.overflow="hidden";var v="margin"+p.charAt(0).toUpperCase()+p.substr(1);if(/^(l|r)/.test(p)){c[v]=-w.offsetWidth;var u=p.length===4?"marginRight":"marginLeft";c[u]=w.offsetWidth;e[u]=w.style[u]}else{c[v]=-w.offsetHeight}e[v]=w.style[v]}})(Py);namespace("System.Fx.Animate");namespace(".Ajax",Py.Class({onAbort:function(){this.trigger("abort")},onStart:function(a){this.trigger("start",a)},onSuccess:function(a,b){this.trigger("success",a)},onError:function(a,b){this.trigger("error",a)},onTimeout:function(a){this.trigger("timeout")},onComplete:function(b,a){this.trigger("complete",b)},onStateChange:function(a){var c=this,d=c.xhr,b;if(d&&(d.readyState===4||a)){d.onreadystatechange=Function.empty;c.xhr=null;if(a===true){d.abort();c.onTimeout(d);b="Request Timeout"}else{if(a){b="error"}else{a=true;b=!XMLHttpRequest.isOk(d)&&(d.statusText||"error")}}if(!b){c.onSuccess(d.responseText,d)}else{if(a===true){a=new Error(b)}a.xhr=d;c.onError(a,d)}c.onComplete(d,b);d=null}},constructor:function(a){if(a){Object.extend(this,a)}},type:"GET",async:true,link:"wait",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/javascript, text/html, application/xml, text/xml, */*"},disableCache:false,check:function(b){var a=this;if(!a.xhr){return true}switch(a.link){case"wait":a.one("complete",function(){this.send(b,true);return false});return false;case"cancel":a.abort();return true;default:assert(!link||link=="ignore","Ajax.prototype.send(data): 成员 {link} 必须是 wait、cancel、ignore 之一。",a.link);return false}return true},send:function(g){assert.notNull(this.url,"Ajax.prototype.send(data, chain): {this.url} ~。",this.url);assert(/^(GET|POST|PUT)$/.test(this.type),"{this.type} 必须是 GET、PUT 或 POST (注意大小写) 。");var f=this,d=f.type,a=f.url,c=f.async;if(!f.check(g)){return f}f.onStart(g);if(typeof g!=="string"){g=String.param(g)}if(g&&d=="GET"){a+=(a.indexOf("?")>=0?"&":"?")+g;g=null}if(f.disableCache){a+=(a.indexOf("?")>=0?"&":"?")+Py.id++}var i=f.xhr=new XMLHttpRequest();try{if("username" in f){i.open(d,a,c,f.username,f.password)}else{i.open(d,a,c)}}catch(h){f.xhr=null;h.xhr=i;f.onError(h,i);f.onComplete(i,"error");return f}for(var b in f.headers){try{i.setRequestHeader(b,f.headers[b])}catch(h){trace.error(h)}}i.onreadystatechange=function(){f.onStateChange(false)};try{i.send(g)}catch(h){f.onStateChange(h);return f}if(!c){f.onStateChange()}else{if(f.timeouts>0){setTimeout(function(){f.onStateChange(true)},f.timeouts)}}return f},setEncoding:function(a){if(a){this.setHeader("Accept-Charset",a)}return this.setHeader("contentType","application/x-www-form-urlencoded"+(a?"; charset="+a:""))},setHeader:function(a,b){if(!this.hasOwnProperty("header")){this.header=Object.clone(this.header)}this.header[a]=b;return this},abort:function(){if(this.xhr){this.xhr.abort();this.onAbort();this.xhr=null}return this},xType:"ajax"}).addEvents());String.map("get post",function(a){var b=Function.empty;return function(g,h,e,d,f,c){assert.isString(g,"Ajax."+a+"(url, data, onsuccess, onerror, timeouts, ontimeout): 参数{url} 必须是一个地址。如果需要提交至本页，使用 location.href。");new Ajax({url:g,onSuccess:e||b,onError:d||b,timeouts:f,onTimeout:c||b,type:a.toUpperCase()}).send(h)}},Ajax);namespace("System.Ajax.Ajax");