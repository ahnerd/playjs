var Py={debug:true,rootPath:undefined,stackTrace:false,defaultNamespace:this,theme:"default",resource:"share",trace:true};(function(w){var rSpace=/^[\s\u00A0]+|[\s\u00A0]+$/g,rFormat=/\{+?(\S*?)\}+/g,rPoint=/\./g,rFirstChar=/\b[a-z]/g,rWhite=/%20/g,rToCamelCase=/[\-_]\D/g,document=w.document,nv=w.navigator,arp=Array.prototype,forEach=arp.forEach||each,makeArray=arp.slice,eventMgr={$default:{add:emptyFn,trigger:emptyFn,remove:emptyFn}},o=apply(w.Object,{extendIf:applyIf,extend:(function(){for(var item in {toString:true}){return apply}Py.enumerables=["toString","hasOwnProperty","valueOf","constructor","isPrototypeOf"];return function(dest,src){for(var i=Py.enumerables.length,value;i--;){if(hasOwnProperty.call(src,value=Py.enumerables[i])){dest[value]=src[value]}}return apply(dest,src)}})(),each:function(iterable,fn,bind){assert(!o.isFunction(iterable),"Object.each(iterable, fn, bind): 参数 {iterable} 不能是可执行的函数。 ",iterable);assert(o.isFunction(fn),"Object.each(iterable, fn, bind): 参数 {fn} 必须是可执行的函数。 ",fn);if(iterable!=null){var l=iterable.length,t;if(l===undefined){for(t in iterable){if(fn.call(bind,iterable[t],t,iterable)===false){return false}}}else{t=-1;while(++t<l){if(fn.call(bind,iterable[t],t,iterable)===false){return false}}}}return true},update:function(iterable,fn,dest,args){dest=dest||iterable;o.each(iterable,o.isFunction(fn)?function(value,key){value=fn.call(args,value,key);if(value!==undefined){dest[key]=value}}:function(value,key){if(value!=undefined){value=value[fn];assert(dest[key],"Object.update(iterable, fn, dest, args): 试图把iterable[{key}][{fn}] 放到 dest[key][fn], 但  dest[key] 是一个空的成员。");if(args){dest[key][fn]=value}else{dest[key]=value}}});return dest},isObject:function(obj){return obj!==null&&typeof obj=="object"},isArray:function(obj){return toString.call(obj)==="[object Array]"},isFunction:function(obj){return toString.call(obj)==="[object Function]"},type:function(obj){var b=typeof obj;switch(b){case"object":return obj==null?"null":(obj.xType||b);case"function":for(obj in obj.prototype){return"class"}default:return b}},clone:function(obj){var deep=this-1;if(o.isObject(obj)&&!(deep<0)){if(obj.clone){return obj.clone()}obj=o.update(obj,o.clone,o.isArray(obj)?[]:{},deep)}return obj},set:function(obj,config){if(config){for(var key in config){var setter="set"+key.capitalize(),val=config[key];if(o.isFunction(obj[setter])){obj[setter](val)}else{if(o.isFunction(obj[key])){obj[key](val)}else{if(obj[key]&&obj[key].set){obj[key].set(val)}else{if(obj.set){obj.set(key,val)}else{obj[key]=val}}}}}}},addCallback:function(obj,name,fn){assert.notNull(obj,"Object.addCallback(obj, name, fn): 参数 obj ~。");assert.isFunction(fn,"Object.addCallback(obj, name, fn): 参数 {fn} ~。");var f=obj[name];obj[name]=typeof f==="function"?function(){var v=f.apply(this,arguments);fn.apply(this,arguments);return v}:fn;return obj}}),toString=o.prototype.toString,hasOwnProperty=o.prototype.hasOwnProperty,np=Native.prototype={implement:function(obj){assert(obj&&this.prototype,"Native.prototype.implement(obj): 无法扩展类，因为 {obj} 或 this.prototype 为空。",obj);o.extend(this.prototype,obj);return this},implementIf:function(obj){assert(obj&&this.prototype,"Native.prototype.implementIf(obj): 无法扩展类，因为 {obj} 或 this.prototype 为空。",obj);applyIf(this.prototype,obj);return this},addEvents:function(events){var ep=this.prototype;assert(!events||o.isObject(events),"Py.Native.prototype.addEvents(events): 参数 {event} 必须是一个包含事件的对象。 如 {click: { add: ..., remove: ..., trigger: ..., createEvent: ..., setup: ... } ",events);applyIf(ep,p.IEvent);if(events){var xType=hasOwnProperty.call(ep,"xType")?ep.xType:(ep.xType=(p.id++).toString());o.update(events,function(e){return applyIf(e,eventMgr.$default)},eventMgr[xType]||(eventMgr[xType]={}))}return this},extend:function(members,quick){var constructorDefined=hasOwnProperty.call(members=members instanceof Function?{constructor:members}:(members||{}),"constructor"),useDefinedConstructor=(quick=quick!==false)&&constructorDefined,subClass=useDefinedConstructor?members.constructor:function(){var me=this,c=me.constructor;me.constructor=arguments.callee;c.apply(me,arguments)},baseClass=this,constructor=constructorDefined?members.constructor:baseClass.prototype.constructor;emptyFn.prototype=baseClass.prototype;Native(subClass).prototype=apply(new emptyFn,members);subClass.prototype.constructor=!useDefinedConstructor&&!quick?function(){o.update(this,o.clone);constructor.apply(this,arguments)}:constructor;subClass.base=baseClass;return subClass}},p=namespace("Py.",{Events:eventMgr,data:function(obj,type){assert.isObject(obj,"Py.data(obj, type): 参数 {obj} ~。");var d=obj.data||(obj.data={});return d[type]||(d[type]={})},getData:function(obj,type){assert.isObject(obj,"Py.getData(obj, type): 参数 {obj} ~。");var d=obj.data;return d&&d[type]},setData:function(obj,type,data){assert.isObject(obj,"Py.setData(obj, type): 参数 {obj} ~。");return(obj.data||(obj.data={}))[type]=data},cloneData:function(src,dest){assert.isObject(src,"Py.cloneData(src, dest): 参数 {src} ~。");assert.isObject(dest,"Py.cloneData(src, dest): 参数 {dest} ~。");var data=src.data;if(data){dest.data=o.clone.call(1,data);var evt=src.data.event,i;if(evt){delete dest.data.event;for(i in evt){evt[i].handlers.forEach(function(fn){p.IEvent.on.call(dest,i,fn)})}}}},namespaces:[],loadStyle:function(url){document.getElementsByTagName("HEAD")[0].appendChild(apply(document.createElement("link"),{href:url,rel:"stylesheet",type:"text/css"}))},loadText:function(uri,callback){assert.notNull(uri,"Py.loadText(uri, callback): 参数 {uri} ~。");var xmlHttp=new XMLHttpRequest();try{xmlHttp.open("GET",uri,false);xmlHttp.send(null);if(!XMLHttpRequest.isOk(xmlHttp)){throw String.format("请求失败:  \r\n   地址: {0} \r\n   状态: {1}   {2}  {3}",uri,xmlHttp.status,xmlHttp.statusText,w.location.protocol=="file:"?"\r\n原因: 当前正使用 file 协议打开文件，请使用 http 协议。":"")}uri=xmlHttp.responseText;return callback?callback(uri):uri}catch(e){trace.error(e)}finally{xmlHttp=null}return null},eval:w.execScript||function(statement){return w.eval(statement)},Class:function(members,quick){return p.Object.extend(members,quick)},IEvent:{on:function(type,fn){assert.isFunction(fn,"IEvent.on(type, fn): 参数 {fn} ~。");var me=this,d=p.data(me,"event"),evt=d[type];if(!evt){var eMgr=eventMgr[me.xType];eMgr=eMgr&&eMgr[type]||getMgr(me,type)||eventMgr.$default;evt=eMgr.setup?eMgr.setup():function(e){var fn=arguments.callee,target=fn.target,handlers=fn.handlers.slice(0),i=-1,len=handlers.length;fn.event.trigger.call(target,e);while(++i<len){if(handlers[i].call(target,e)===false){return false}}return true};evt.event=eMgr;evt.handlers=[fn];d[type]=evt;eMgr.add(evt.target=me,type,evt)}else{evt.handlers.push(fn)}return me},one:function(type,fn){assert.isFunction(fn,"IEvent.one(type, fn): 参数 {fn} ~。");return this.on(type,function(){this.un(type,arguments.callee);return fn.apply(this,arguments)})},un:function(type,fn){assert(!fn||o.isFunction(fn),"IEvent.un(type, fn): 参数 {fn} 必须是可执行的函数或空参数。",fn);var me=this,d=p.getData(me,"event"),evt;if(d){if(evt=d[type]){if(fn){evt.handlers.remove(fn)}if(!fn||evt.handlers.length==0){evt.handlers=null;delete d[type];evt.event.remove(me,type,evt)}}else{if(!type){for(evt in d){me.un(evt)}}}}return me},trigger:function(type,e){var me=this,evt=p.getData(me,"event");return(!evt||!(evt=evt[type])||evt(evt.event.createEvent?(e=evt.event.createEvent(e,me)):e))&&(!me[type="on"+type]||me[type](e)!==false)}},Object:Native(Object).implement({base:function(){var ctor=arguments.callee.caller;ctor.bubble=true;try{this.base("constructor",arguments)}finally{delete ctor.bubble}},base:function(name,args){var me=this.constructor.base,fn=this[name];fn.bubble=true;assert(!me||me.prototype[name],"base(name, args): 父类不存在 {name} 的属性或方法。",name);while(me&&(fn=me.prototype[name]).bubble){me=me.base;assert(!me||me.prototype[name],"base(name, args): 父类不存在 {name} 的属性或方法。",name)}fn.bubble=true;try{if(args===arguments.callee.caller.arguments){return fn.apply(this,args)}arguments[0]=this;return fn.call.apply(fn,arguments)}finally{delete fn.bubble}},memberwiseClone:function(){var me=this,newObject=new me.constructor(),i;for(i in me){if(hasOwnProperty.call(me,i)){newObject[i]=me[i]}}return newObject}}),using:include,namespace:namespace,imports:function(resource,theme){assert(name&&name.indexOf,"imports(resource, theme): 参数 {namespace} 不是合法的名字空间。",name);assert.isArray(theme,"imports(resource, theme): 参数 {theme} ~。");if(name.indexOf("*")>-1){(theme||[p.resource,p.theme]).forEach(function(value){include(name.replace("*",value),isStyle)})}else{include(resource,true)}},addEventListener:document.addEventListener?function(type,fn){this.addEventListener(type,fn,false)}:function(type,fn){this.attachEvent("on"+type,fn)},removeEventListener:document.removeEventListener?function(type,fn){this.removeEventListener(type,fn,false)}:function(type,fn){this.detachEvent("on"+type,fn)},Native:Native,theme:"default",resource:"share",defaultNamespace:w});applyIf(Array,{create:function(iterable,start){if(!iterable){return[]}if(iterable.item||iterable.count){var l=iterable.length||iterable.count;start=start||0;var r=new Array(l);while(l--){r[l]=iterable[start++]}return r}return makeArray.call(iterable,start)},copyIf:function(src,dest){for(var i=0;i<src.length;i++){dest.include(src[i])}},plain:function(){var r=[];forEach.call(arguments,function(d){if(d&&typeof d.length==="number"){Array.copyIf(d,r)}else{r.include(d)}});return r}});apply(Function,{empty:emptyFn,returnTrue:Object(true),returnFalse:Object(false),bind:function(fn,bind){assert.isFunction(fn,"Function.bind(fn): 参数 {fn} ~。");return function(){return fn.apply(bind,arguments)}},from:Object});apply(String,{format:function(format,object){if(!format){return""}assert(format.replace,"String.format(format, object): 参数 {format} 必须是字符串。",format);var toString=this,arr=o.isObject(object)&&arguments.length===2?object:makeArray.call(arguments,1);return format.replace(rFormat,function(match,name){var start=match.charAt(1)=="{",end=match.charAt(match.length-2)=="}";if(start||end){return match.slice(start,match.length-end)}return name in arr?toString(arr[name]):""})},map:function(str,source,dest,copyIf){assert(typeof str=="string","String.map(str, source, dest, copyIf): 参数 {str} 必须是字符串。",str);var isFn=o.isFunction(source);str.split(" ").forEach(function(v,k,c){var val=isFn?source(v,k,c):source[v];if(dest&&!(copyIf&&(v in dest))){dest[v]=val}});return dest},param:function(obj){if(!obj){return""}var s=[],e=encodeURIComponent;o.each(obj,function(value,key){s.push(e(key)+"="+e(value))});return s.join("&").replace(rWhite,"+")},ellipsis:function(value,len){assert.isString(value,"String.ellipsis(value, len): 参数  {value} ~。");assert.isNumber(len,"String.ellipsis(value, len): 参数  {len} ~。");return value.length>len?value.substr(0,len)+"...":value}});applyIf(Date,{now:function(){return +new Date()}});applyIf(nv,(function(ua){var match=ua.match(/(IE|Firefox|Chrome|Opera|Version).((\d+)\.?[\d.]*)/i)||["","Other",0,0],browser=match[0]?match[1]:!document.all&&!nv.taintEnabled?"Safari":match[0],fullBrowser=browser+match[3];nv["is"+browser]=nv["is"+fullBrowser]=true;return{browser:browser,version:match[2],isQuirks:typeof w.Element!=="function"&&String(w.Element)!=="[object Element]",isStd:!!-[1,],fullBrowser:fullBrowser}})(nv.userAgent));Date.prototype.xType="date";RegExp.prototype.xType="regexp";forEach.call([String,Array,Function,Date,Number],Native);String.implementIf({toCamelCase:function(){return this.replace(rToCamelCase,toCamelCase)},trim:function(){return this.replace(rSpace,"")},capitalize:function(){return this.replace(rFirstChar,toUpperCase)}});Array.implementIf({indexOf:function(item,startIndex){startIndex=startIndex||0;for(var l=this.length;startIndex<l;startIndex++){if(this[startIndex]===item){return startIndex}}return -1},each:each,filter:function(fn,bind){var r=[];forEach.call(this,function(value,i,array){if(fn.call(this,value,i,array)){r.push(value)}},bind);return r},forEach:each,select:function(name,value){var me=this,index=-1,i=-1,l=me.length,t,fn=o.isFunction(name)?name:function(t){return t[name]===value};while(++i<l){t=me[i];if(fn.call(t,t,i,me)){me[++index]=t}}me.splice(++index,l-index);return me},include:function(value){var b=this.indexOf(value)!==-1;if(!b){this.push(value)}return b},insert:function(index,value){assert.isNumber(index,"Array.prototype.insert(index, value): 参数 index ~。");for(var i=this.length++;i>index;i--){this[i]=this[i-1]}this[index]=value;return this},invoke:function(fn,args){assert(args&&typeof args.length==="number","Array.prototype.invoke(fn, args): 参数 {args} 必须是数组, 无法省略。");var r=[];forEach.call(this,o.isFunction(fn)?function(value,index){r.push(fn.call(args,value,index))}:function(value){assert(value&&o.isFunction(value[fn]),"Array.prototype.invoke(fn, args): {args} 内的 {value} 不包含可执行的函数 {fn}。",args,value,fn);r.push(value[fn].apply(value,args))});return r},unique:function(){var r=[];Array.copyIf(this,r);return r},remove:function(value){var i=this.indexOf(value);if(i!==-1){this.splice(i,1)}return i},xType:"array"});if(!w.XMLHttpRequest||nv.isQuirks){try{(w.XMLHttpRequest=function(){return new ActiveXObject("MSXML2.XMLHTTP")})()}catch(e){try{(w.XMLHttpRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")})()}catch(e){}}}w.XMLHttpRequest.isOk=function(xmlHttp){assert.isObject(xmlHttp,"XMLHttpRequest.isOk(xmlHttp): 参数 {xmlHttp} 不是合法的 XMLHttpRequest 对象");var status=xmlHttp.status;if(!status){var protocol=w.location.protocol;return(protocol=="file: "||protocol=="chrome: "||protocol=="app: ")}return(status>=200&&status<300)||status==304||status==1223};apply(p,{id:Date.now()%100,rootPath:p.rootPath||(function(d){var b=d.getElementsByTagName("script");b=b[b.length-1];b=nv.isQuirks?b.getAttribute("src",5):b.src;return(b.match(/[\S\s]*\//)||[""])[0]})(document),setupWindow:function(){String.map("Class using imports namespace undefined",p,w,true);var document=w.document,doReady=function(){if(document.isReady){return}document.isReady=true;p.removeEventListener.call(document,eventName,doReady,false);doReady.list.invoke("call",[document,p]);doReady=null},doLoad=function(){document.isLoaded=true;p.removeEventListener.call(w,"load",doLoad,false);doLoad.list.invoke("call",[w,p]);doLoad=null},eventName=nv.isStd?"DOMContentLoaded":"readystatechange";document.onReady=function(fn){assert.isFunction(fn,"document.ready(fn): 参数 {fn} ~。");if(document.isReady){fn.call(document)}else{doReady.list.push(fn)}};document.onLoad=function(fn){assert.isFunction(fn,"document.ready(fn): 参数 {fn} ~。");if(document.isLoaded){fn.call(w)}else{doLoad.list.push(fn)}};doReady.list=[];doLoad.list=[doReady];if(document.readyState!=="complete"){p.addEventListener.call(document,eventName,doReady,false);p.addEventListener.call(w,"load",doLoad,false);if(!navigator.isStd){var toplevel=false;try{toplevel=w.frameElement==null}catch(e){}if(toplevel&&document.documentElement.doScroll){(function(){if(document.isReady){return}try{document.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,1);return}doReady()})()}}}else{setTimeout(doLoad,1)}}});p.setupWindow();function apply(dest,src){assert(dest!=null,"Object.extend(dest, src): 参数 {dest} 不可为空。",dest);assert(src!=null,"Object.extend(dest, src): 参数 {src} 不可为空。",src);for(var b in src){dest[b]=src[b]}return dest}function applyIf(dest,src){assert(dest!=null,"Object.extendIf(dest, src): 参数 {dest} 不可为空。",dest);assert(src!=null,"Object.extendIf(dest, src): 参数 {src} 不可为空。",src);for(var b in src){if(dest[b]===undefined){dest[b]=src[b]}}return dest}function Native(nativeClass){return applyIf(nativeClass,np)}function each(fn,bind){assert(o.isFunction(fn),"Array.prototype.each(fn, bind): 参数 {fn} 必须是一个可执行的函数。",fn);var i=-1,me=this,l=me.length;while(++i<l){if(fn.call(bind,me[i],i,me)===false){return false}}return true}function toCamelCase(match){return match.charAt(1).toUpperCase()}function toUpperCase(match){return match.toUpperCase()}function emptyFn(){}function getMgr(me,type){var cb=me.constructor,eMgr;while(cb&&(cb=cb.base)){eMgr=eventMgr[cb.prototype.xType];if(eMgr&&(type in eMgr)){return eMgr[type]}}}function namespace(name,obj){assert(name&&name.split,"namespace(namespace, obj, value): 参数 {namespace} 不是合法的名字空间。",name);if(arguments.length==1){return p.namespaces.include(name)}name=name.split(".");var current=w,i=-1,len=name.length-1;name[0]=name[0]||"Py";while(++i<len){current=current[name[i]]||(current[name[i]]={})}i=name[len];if(!i){obj=applyIf(current,obj);i=name[--len]}else{current[i]=obj}if(!(i in Py.defaultNamespace)){Py.defaultNamespace[i]=obj}return obj}function include(name,isStyle){assert(name&&name.indexOf,"using(namespace): 参数 {namespace} 不是合法的名字空间。",name);if(p.namespaces.include(name)){return}if(name.indexOf("/")==-1){name=name.toLowerCase().replace(rPoint,"/")+(isStyle?".css":".js")}var doms,check,callback;if(isStyle){callback=p.loadStyle;doms=document.styleSheets;src="href"}else{callback=p.loadText;doms=document.getElementsByTagName("SCRIPT");src="src"}o.each(doms,function(dom){return !dom[src]||dom[src].toLowerCase().indexOf(name)==-1})&&callback(p.rootPath+name,p.eval)}function Object(){var v=arguments[0];return function(){return v}}})(this);Object.extend(String,{toUTF8:function(a){return a.replace(/[^\x00-\xff]/g,function(d,c){return"\\u"+((c=d.charCodeAt())<16?"000":c<256?"00":c<4096?"0":"")+c.toString(16)})},fromUTF8:function(a){return a.replace(/\\u([0-9a-f]{3})([0-9a-f])/gi,function(e,d,f){return String.fromCharCode((parseInt(d,16)*16+parseInt(f,16)))})}});function trace(c,b){if(arguments.length==0||!Py.trace){return}var a=window.console&&console.log;if(typeof c=="string"){if(arguments.length>1){c=String.format.apply(trace.inspect,arguments)}}else{if(!a||navigator.isIE8){c=trace.inspect(c,b)}}if(a){console.log(c)}else{trace.alert(c)}}Object.extendIf(trace,{alert:function(a){alert(a)},api:function(b){if(b&&b.prototype){for(var a in b.prototype){trace.dir(b.prototype);return}}else{if(Object.isObject(b)){trace.dir(b);return}}trace(b)},from:function(a){return function(){trace(a,arguments)}},dir:function(c){if(Py.trace){if(window.console&&console.dir){console.dir(c)}else{if(c){var b="{\r\n",a;for(a in c){b+="\t"+a+" = "+trace.inspect(c[a],1)+"\r\n"}b+="}";trace.alert(b)}}}},inspect:function(e,a){if(a==null){a=0}switch(typeof e){case"function":if(a==0&&e.prototype&&e.prototype.xType){return String.format("class {0} : {1} {2}",e.prototype.xType,(e.prototype.base&&e.prototype.base.xType||"Object"),trace.inspect(e.prototype,a+1))}return a==0?String.fromUTF8(e.toString()):"function()";case"object":if(e==null){return"null"}if(a>=3){return e.toString()}if(Object.isArray(e)){return"["+Object.update(e,trace.inspect,[]).join(", ")+"]"}else{if(e.setInterval&&e.resizeTo){return"window"}if(e.nodeType){if(e.nodeType==9){return"document"}if(e.tagName){var c=e.tagName.toLowerCase(),d=c;if(e.id){d+="#"+e.id;if(e.className){d+="."+e.className}}else{if(e.outerHTML){d=e.outerHTML}else{if(e.className){d+=' class=".'+e.className+'"'}d="<"+d+">"+e.innerHTML+"</"+c+">  "}}return d}return"[Node name="+e.nodeName+"value="+e.nodeValue+"]"}var d="{\r\n",b;for(b in e){d+="\t"+b+" = "+trace.inspect(e[b],a+1)+"\r\n"}d+="}";return d}case"string":return a==0?e:'"'+e+'"';case"undefined":return"undefined";default:return e.toString()}},log:function(){if(Py.trace){if(window.console&&console.log&&console.log.apply){console.log.apply(console,arguments)}else{trace(Object.update(arguments,trace.inspect,[]).join(" "))}}},error:function(a){if(Py.trace){if(window.console&&console.error){console.error(a)}else{throw a}}},warn:function(a){if(Py.trace){if(window.console&&console.warn){console.warn(a)}else{trace.alert("[警告]"+a)}}},info:function(a){if(Py.trace){if(window.console&&console.info){console.info(a)}else{trace.alert("[信息]"+a)}}},ifDebug:function(a){if(Py.debug===false){return}try{a();return""}catch(b){return b}},clear:function(){if(window.console&&console.clear){console.clear()}},empty:function(a){trace("函数运行了    "+(a||Py.id++))},ifNot:function(b,a){if(!b){trace.warn(a)}},test:function(a,b){trace("[时间] "+trace.runTime(a,null,b))},runTime:function(b,a,e){e=e||1000;a=a||[];var c=new Date();while(e-->0){b.apply(null,a)}return new Date()-c}});function assert(b,d){if(!b&&Py.debug){var c=arguments;if(c.length>2){var a=2;d=d.replace(/\{([\w$\.\(\)]*?)\}/g,function(f,e){return c.length<=a?f:e+" = "+String.ellipsis(trace.inspect(c[a++]),200)})}else{d=d||"断言失败"}c=arguments.callee.caller;if(Py.stackTrace!==false){while(c.debugStepThrough){c=c.caller}if(c){d+="\r\n--------------------------------------------------------------------\r\n"+String.ellipsis(String.fromUTF8(c.toString()),600)}}if(Py.trace){trace.error(d)}else{throw new Error(d)}}return b}(function(){function b(g,f,e,d){return assert(g,f?f.replace("~",d):d,e)}function a(e,f,d){return b(e(d[0]),d[1],d[0],f)}Object.extend(assert,{isFunction:function(){return a(Object.isFunction,"必须是可执行的函数",arguments)},isArray:function(){return a(Object.isArray,"必须是数组",arguments)},isObject:function(d,e){return b(Object.isObject(d)||Object.isFunction(d),e,d,"必须是引用的对象",arguments)},isNumber:function(d,e){return b(typeof d=="number"||d instanceof Number,e,d,"必须是数字")},isNode:function(d,e){return b(d&&d.nodeType,e,d,"必须是 DOM 节点")},isElement:function(d,e){return b(d&&d.style,e,d,"必须是 Element 对象")},isString:function(d,e){return b(typeof d=="string"||d instanceof String,e,d,"必须是字符串")},isDate:function(d,e){return b(Object.type(d)=="date"||d instanceof Date,e,d,"必须是日期")},isRegExp:function(d,e){return a(Object.type(d)=="regexp"||d instanceof RegExp,e,d,"必须是正则表达式")},notNull:function(d,e){return b(d!=null,e,d,"不可为空")},between:function(f,e,d,g){return b(f>=e&&!(f>=d),g,f,"超出索引, 它必须在 ["+e+", "+(d===undefined?"+∞":d)+") 间")},instanceOf:function(f,g,h){if(!Object.isArray(g)){g=[g]}var e=typeof f,d=Object.type(f);return b(g.filter(function(i){return i==e||i==d}).length,h,f,"类型错误。")},notEmpty:function(d,e){return b(d&&d.length,e,d,"为空")}});b.debugStepThrough=a.debugStepThrough=true;for(var c in assert){assert[c].debugStepThrough=true}})();namespace("System.Dom.Element");(function(U){var Y=U.Py,i=U.document,Z=Object,I=Function.empty,ah=Z.extend,l=Array.prototype,ae=i.createElement("DIV"),ag=U.Element||(U.Element=function(){}),aa=ag.prototype,v={},M=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,K=/<(?:script|object|embed|option|style)|\schecked/i,k=/<([\w:]+)/,X={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"]};if(navigator.isQuirks){aa.domVersion=1}ah(Y,{Element:ag,$:navigator.isQuirks?function(e){var c=d(e);if(c&&c.domVersion!==aa.domVersion){Z.extendIf(c,Element.prototype)}return c}:d,bindWindow:function(e){assert(e.setInterval,"Py.setupWindow(w): 参数 {w} 必须是一个 Window 对象。",e);if(!e.Element){e.Element=ag}if(e.Element!==ag){c(Element.prototype,e.Element.prototype);Z.extendIf(e.Element,ag)}var o=ah(e.document,Y.IEvent);if(!o.id){c(i,o)}if(!("defaultView" in o)){o.defaultView=o.parentWindow}e.$=Y.$;function c(am,w){for(var p in am){if(!(p in w)&&(p in am)){w[p]=am[p]}}}}});Y.namespace(".Py.ElementList",Y.Class({xType:"Py.ElementList",constructor:function(c){assert(c&&c.length!==undefined,"Py.ElementList.prototype.constructor(doms): 参数 {doms} 必须是一个 NodeList 或 Array 类型的变量。",c);this.doms=c;if(c[0]&&!c[0].xType){Z.update(c,Y.$)}},each:function(e,c){return l.invoke.call(this.doms,e,c)}}));ah(ag,{parse:function(ao,p,e){assert.isString(ao,"Element.parse(html, context, cachable): 参数 {html} ~。");p=p||i;assert(p.createElement,"Element.parse(html, context, cachable): 参数 {context} 必须是一个 Document 对象。",p);var c=v[ao];if(!c||c.ownerDocument!==p){var an=ao.trim().replace(M,"<$1></$2>"),aq=k.exec(an),am=e!==false&&K.test(ao);if(aq){c=p.createElement("div",true);var o=X[aq[1].toLowerCase()];if(o){c.innerHTML=o[1]+an+o[2];o=o[0];while(o--){c=c.lastChild}}else{c.innerHTML=an}c=c.firstChild;if(c.nextSibling){var ap=p.createDocumentFragment();var w=c.nextSibling;while(w){ap.appendChild(c);c=w;w=w.nextSibling}ap.appendChild(c);c=ap}else{Y.$(c)}}else{c=p.createTextNode(ao)}}if(!am){v[ao]=c.clone?c.clone(false,true):c.cloneNode(true)}return c},implementListeners:[function(o,e,c){Object.each(o,function(am,p){var am=o[p];if(!c||!(p in aa)){aa[p]=am}if(!(p in i)){i[p]=am}if(c&&Y.Py.ElementList.prototype[p]){return}var w;switch(e){case 2:w=function(){var ap=this.doms,an=ap.length,ao=-1;while(++ao<an){ap[ao][p].apply(ap[ao],arguments)}return this};break;case 3:w=function(){return new Y.Py.ElementList(this.each(p,arguments))};break;case 4:w=function(){var an=arguments;return new Y.Py.ElementList(Array.plain.apply(Array,this.each(function(aq,ao){var ap=this[ao][p].apply(this[ao],an);return ap&&ap.doms||ap},this.doms)))};break;case 5:w=function(){var an=true,ao=arguments;this.each(function(ap){return an=ap[p].apply(ap[p],ao)});return an};break;default:w=function(){return this.each(p,arguments)};break}Y.Py.ElementList.prototype[p]=w})}],implement:function(o,e,c){assert.notNull(o,"Element.implement(obj, listType): 参数 {obj} ~。");this.implementListeners.forEach(function(p){p(o,e,c)});if(aa.domVersion){aa.domVersion++}return this},implementIf:function(e,c){return this.implement(e,c,true)},getDocument:al});ah(i,{createDiv:function(c){return i.create("div",c)},create:function(c,e){var o=Y.$(i.createElement(c));o.className=e;return o},id:function(){return arguments.length===1?Y.$(arguments[0]):new Y.Py.ElementList(Z.update(arguments,Y.$,[]))},getDom:navigator.isQuirks?function(){return Y.$(this.documentElement)}:function(){return this.documentElement}});ag.implementIf({getDom:function(){return this},addEventListener:Y.addEventListener,removeEventListener:Y.removeEventListener,xType:"element"},2);Y.bindWindow(U);function al(c){return c.ownerDocument||c.document||c}function d(c){return typeof c=="string"?i.getElementById(c):c}Y.namespace(".Events.element.$default",{setup:function(){return function(ao){var w=arguments.callee,p=-1,o=w.handlers.slice(0),c=o.length,an=w.target,am=false;w.event.trigger.call(an,ao);while(++p<c){if(ao.returnValue===am){return am}if(o[p].call(an,ao)===am){ao.stopPropagation();ao.preventDefault()}}return ao.returnValue!==am}},createEvent:function(o,c){assert(!o||(o.stopPropagation&&o.preventDefault),"IEvent.trigger(e): 参数 e 必须有成员 stopPropagation 和 preventDefault ，可使用类型 Py.Event 代替。");return o||new Y.Event(c)},trigger:I,add:function(o,e,c){o.addEventListener(e,c,false)},remove:function(o,e,c){o.removeEventListener(e,c,false)}});ag.defineEvents=function(w,p,o,an,c,am){var e=Y.Events.element;delete e[w];String.map(w,Function.from(Z.extendIf({trigger:p&&o?function(ao){eventMgr.element[p].trigger.call(this,ao);o.call(this,ao)}:o||(e[w]||e.$default).trigger,add:an===true?function(aq,ap,ao){aq.addEventListener(p,this.delegate,false)}:an||p&&function(aq,ap,ao){aq.addEventListener(p,ao,false)},createEvent:am,remove:c===true?function(aq,ap,ao){aq.addEventListener(p,this.delegate,false)}:c||p&&function(aq,ap,ao){aq.removeEventListener(p,ao,false)}},e.$default)),e);return p?e[w]:arguments.callee};var ab=Y.namespace(".Event",Class({constructor:function(c){this.target=c},stopPropagation:function(){this.cancelBubble=true},preventDefault:function(){this.returnValue=false}})).prototype,aj,C,f;if(navigator.isStd){C=f=aj=function(c){if(!c.srcElement){c.srcElement=c.target.nodeType===3?c.target.parentNode:c.target}Object.addCallback(c,"preventDefault",ab.preventDefault)}}else{aj=function(c){c.target=c.srcElement||i;c.stopPropagation=ab.stopPropagation;c.preventDefault=ab.preventDefault};C=function(c){aj(c);c.relatedTarget=c.fromElement===c.target?c.toElement:c.fromElement;var o=al(c.target).getDom();c.pageX=c.clientX+o.scrollLeft;c.pageY=c.clientY+o.scrollTop;c.layerX=c.x;c.layerY=c.y;c.which=(c.button&1?1:(c.button&2?3:(c.button&4?2:0)))};f=function(c){aj(c);c.which=c.keyCode}}ag.defineEvents("click dblclick mouseup mousedown contextmenu mouseover mouseout mousemove selectstart selectend mouseenter mouseleave",undefined,C)("mousewheel DOMMouseScroll blur focus focusin focusout scroll change select submit error",undefined,aj)("keydown keypress keyup",undefined,f)("load unload",undefined,function(c){this.un(c.type)});if(navigator.isFirefox){ag.defineEvents("mousewheel","DOMMouseScroll")}if(!navigator.isIE){ag.defineEvents("mouseenter","mouseover").trigger=ag.defineEvents("mouseleave","mouseout").trigger=function(o){Y.Events.element[o.type].trigger(o);var c=o.relatedTarget;while(c&&c!=this){c=c.parentNode}o.returnValue=this!=c}}ag.implement(Y.IEvent,2);var P=/opacity=([^)]*)/,J=/^-?\document+(?:px)?$/i,F=/^-?\document/,S=/^on([a-z0-9$_]+)/,E=/\-|float/,A="borderTopWidth",L="borderLeftWidth",h={width:{b:[L,"borderRightWidth"],p:["paddingLeft","paddingRight"],m:["marginLeft","marginRight"],document:["left","right"]},height:{b:[A,"borderBottomWidth"],p:["paddingTop","paddingBottom"],m:["marginTop","marginBottom"],document:["top","bottom"]}},R=/^(?:href|src|usemap)$/i,ac=i.defaultView.getComputedStyle,V=ac?function(o,e){assert.isElement(o,"Element.getStyle(elem, name): 参数 {elem} ~。");var c=o.ownerDocument.defaultView.getComputedStyle(o,null);return c?c[e]:null}:function(w,e){assert.isElement(w,"Element.getStyle(elem, name): 参数 {elem} ~。");if(e in T){switch(e){case"height":return w.offsetHeight-ag.getSize(w,e,"pb")+"px";case"width":return w.offsetWidth-ag.getSize(w,e,"pb")+"px";case"opacity":return w.getOpacity().toString()}}var p=w.currentStyle[e];if(!J.test(p)&&F.test(p)){var o=w.style,am=o.left,c=w.runtimeStyle.left;w.runtimeStyle.left=w.currentStyle.left;o.left=e==="fontSize"?"1em":(p||0);p=o.pixelLeft+"px";o.left=am;w.runtimeStyle.left=c}return p},T={"float":"styleFloat" in ae?"styleFloat":"cssFloat","for":"htmlFor","class":"className",innerText:"innerText" in ae?"innerText":"textContent"};ah(ag,{getStyle:V,styleString:y,styleNumber:b,getSize:ac?function(p,o,an){assert.isElement(p,"Element.getSize(elem, type, names): 参数 {elem} ~。");assert(o in h,'Element.getSize(elem, type, names): 参数 {type} 必须是 "width" 或 "height"。',o);assert.isString(an,"Element.getSize(elem, type, names): 参数 {names} ~。");var w=0,am=h[o],e=an.length,ao,c=p.ownerDocument.defaultView.getComputedStyle(p,null);while(e--){ao=am[an.charAt(e)];w+=(parseFloat(c[ao[0]])||0)+(parseFloat(c[ao[1]])||0)}return w}:function(o,e,am){assert.isElement(o,"Element.getSize(elem, type, names): 参数 {elem} ~。");assert(e in h,'Element.getSize(elem, type, names): 参数 {type} 必须是 "width" 或 "height"。',e);assert.isString(am,"Element.getSize(elem, type, names): 参数 {names} ~。");var p=0,w=h[e],c=am.length,an;while(c--){an=w[am.charAt(c)];p+=(parseFloat(V(o,an[0]))||0)+(parseFloat(V(o,an[1]))||0)}return p},attributes:T,styleMaps:h,specialAttr:{},zIndex:10000,isHidden:function(c){assert.isElement(c,"Element.isHidden(elem): 参数 {elem} ~。");return c.style.display==="none"},getAttr:function(o,e){assert.isNode(o,"Element.getAttr(elem, name): 参数 {elem} ~。");var c=navigator.isQuirks&&R.test(e);e=T[e]||e;if(e in o&&!c){if(o.nodeName==="FORM"&&(c=o.getAttributeNode(e))){return c.nodeValue}return o[e]}return c?o.getAttribute(e,2):o.getAttribute(e)},hasClass:function(e,c){assert.isNode(e,"Element.hasClass(elem, className): 参数 {elem} ~。");return(" "+e.className+" ").indexOf(" "+c+" ")>=0}});x("opacity height width defaultValue accessKey cellPadding cellSpacing colSpan frameBorder maxLength readOnly rowSpan tabIndex useMap",T);x("Size Position Opacity Offset Scroll Offsets Style Text",ag.specialAttr);function y(e,c){return e.style[c]||V(e,c)}function b(e,c){return parseFloat(V(e,c))||0}function x(c,e){c.split(" ").forEach(function(o){e[o.toLowerCase()]=o})}function O(o,e,c,am){var w=m(c,am);if(w.x!=null){o.setWidth(w.x-ag.getSize(o.getDom(),"width",e))}if(w.y!=null){o.setHeight(w.y-ag.getSize(o.getDom(),"height",e))}return o}ag.implement({getStyle:function(c){assert.isString(c,"Element.prototype.getStyle(name): 参数 {name} ~。");var o=this.getDom(),e=c.toCamelCase();assert.isElement(o,"Element.prototype.getStyle(name): {this.getDom()} 必须返回 DOM 节点。");return o.style[e]||V(o,e)},getAttr:function(c){return ag.getAttr(this.getDom(),c)},hasClass:function(c){return ag.hasClass(this.getDom(),c)},getText:function(){var e=this.getDom();assert.isNode(e,"Element.prototype.getText(): {this.getDom()} 必须返回 DOM 节点。");switch(e.tagName){case"SELECT":if(e.type!="select-one"){var c=[];Z.each(e.options,function(o){if(o.selected){c.push(o.value)}});return c.join(",")}case"INPUT":case"TEXTAREA":return e.value;default:return e[T.innerText]}},getHtml:function(){assert.isNode(this.getDom(),"Element.prototype.getHtml(): {this.getDom()} 必须返回 DOM 节点。");return this.getDom().innerHTML},getOpacity:!("opacity" in ae.style)?function(){return P.test(y(this.getDom(),"filter"))?parseInt(RegExp.$1)/100:1}:function(){return parseFloat(y(this,"opacity"))||0}}).implement({setStyle:function(c,p){assert.isString(c,"Element.prototype.setStyle(name, value): 参数 {name} ~。");var o=this,e=o.getDom().style;assert.isElement(o.getDom(),"Element.prototype.setStyle(name, value): {this.getDom()} 必须返回 DOM 节点。");if(arguments.length==1){e.cssText=c}else{if(c in T){c=T[c];if(c=="opacity"){return o.setOpacity(p)}}else{c=c.toCamelCase()}if(typeof p==="number"){p+="px"}e[c]=p}return o},setAttr:function(c,o){var e=this.getDom();assert.isNode(e,"Element.prototype.setAttr(name, value): {this.getDom()} 必须返回 DOM 节点。");c=T[c]||c;if(c in e){assert(c!="type"||e.nodeName!="INPUT"||!e.parentNode,"此元素 type 属性不能修改");e[c]=o}else{if(o===null){e.removeAttribute(c)}else{e.setAttribute(c,o)}}return this},set:function(c,o){var e=this;if(typeof c==="string"){var p=e.getDom();assert.isNode(p,"Element.prototype.set(name, value): {this.getDom()} 必须返回 DOM 节点。");if(c in ag.specialAttr){e["set"+ag.specialAttr[c]](o)}else{if(c.match(S)){e.on(RegExp.$1,o)}else{if(p.style&&(c in p.style||E.test(c))){e.setStyle(c,o)}else{if(c in p){p[c]=o}else{e[c]=o}}}}}else{if(Z.isObject(c)){for(o in c){e.set(o,c[o])}}}return e},addClass:function(c){var e=this.getDom();assert.isNode(e,"Element.prototype.addClass(className): {this.getDom()} 必须返回 DOM 节点。");if(!e.className){e.className=c}else{e.className+=" "+c}return this},removeClass:function(c){assert.isNode(this.getDom(),"Element.prototype.removeClass(className): {this.getDom()} 必须返回 DOM 节点。");this.getDom().className=c?this.getDom().className.replace(new RegExp("\\b"+c+"\\b\\s*","g"),""):"";return this},toggleClass:function(e,c){return(c!==undefined?!c:this.hasClass(e))?this.removeClass(e):this.addClass(e)},setText:function(e){var c=this.getDom();assert(!e||typeof e==="string","Element.prototype.setText(value): {value} 必须是字符串。",e);assert.isNode(c,"Element.prototype.setText(value): {this.getDom()} 必须返回 DOM 节点。");switch(c.tagName){case"SELECT":if(c.type==="select-multiple"){e=e.split(",");Z.each(c.options,function(o){o.selected=e.indexOf(o.value)>-1})}case"INPUT":case"TEXTAREA":c.value=e;break;default:c[T.innerText]=e}return this},setHtml:function(c){assert.isNode(this.getDom(),"Element.prototype.setHtml(value): {this.getDom()} 必须返回 DOM 节点。");this.getDom().innerHTML=c;return this},setOpacity:!("opacity" in ae.style)?function(e){assert.isElement(this.getDom(),"Element.prototype.setOpacity(value): {this.getDom()} 必须返回 DOM 节点。");var c=this.getDom().style;assert(e<=1&&e>=0,"Element.prototype.setOpacity(value): 参数 {value} 必须在 0~1 间。",e);c.zoom=1;c.filter=(c.filter||"alpha(opacity=?)").replace(P,"opacity="+e*100);return this}:function(c){assert.isElement(this.getDom(),"Element.prototype.setOpacity(value): {this.getDom()} 必须返回 DOM 节点。");assert(c<=1&&c>=0,"Element.prototype.setOpacity(value): 参数 {value} 必须在 0~1 间。",c);this.getDom().style.opacity=c;return this},show:function(e,c){assert.isElement(this.getDom(),"Element.prototype.show(duration, callBack, type): {this.getDom()} 必须返回 DOM 节点。");this.getDom().style.display="";if(c){setTimeout(c,0)}return this},hide:function(e,c){assert.isElement(this.getDom(),"Element.prototype.hide(duration, callBack, type): {this.getDom()} 必须返回 DOM 节点。");this.getDom().style.display="none";if(c){setTimeout(c,0)}return this},setUnselectable:"unselectable" in ae?function(c){assert.isElement(this.getDom(),"Element.prototype.setUnselectable(value): {this.getDom()} 必须返回 DOM 节点。");this.getDom().unselectable=c!==false?"on":"";return this}:"onselectstart" in ae?function(c){assert.isElement(this.getDom(),"Element.prototype.setUnselectable(value): {this.getDom()} 必须返回 DOM 节点。");this.getDom().onselectstart=c!==false?Function.returnFalse:null;return this}:function(c){assert.isElement(this.getDom(),"Element.prototype.setUnselectable(value): {this.getDom()} 必须返回 DOM 节点。");this.getDom().style.MozUserSelect=c!==false?"none":"";return this},toggle:function(p,o,e,c){return this[(c===undefined?ag.isHidden(this.getDom()):c)?"show":"hide"](p,o,e)},animate:function(){var e=arguments,c=e[0],o=e[1];if(typeof c==="string"){(e[1]={})[c]=o;e[0]=null}else{if(typeof o!=="object"){Array.prototype.unshift.call(e,null)}}this.set(e[1]);if(e[3]){setTimeout(e[3],0)}return this},bringToFront:function(c){assert.isElement(this.getDom(),"Element.prototype.bringToFront(elem): {this.getDom()} 必须返回 DOM 节点。");this.getDom().style.zIndex=Math.max(parseInt(y(this.getDom(),"zIndex"))||0,c&&c.nodeType&&(parseInt(y(c,"zIndex"))+1)||ag.zIndex++);return this}},2);var j=/^(?:body|html)$/i,D=Y.namespace(".Point",Y.Class({constructor:function(c,e){this.set(c,e)},set:function(c,e){this.x=c;this.y=e;return this},add:function(c,e){assert(typeof c=="number"&&typeof e=="number","Point.prototype.add(x, y): 参数 x 和 参数 y 必须是数字。");this.x+=c;this.y+=e;return this},clone:function(){return new D(this.x,this.y)},minus:function(c){assert(c&&"x" in c&&"y" in c,"Point.prototype.minus(p): 参数 {p} 必须有 'x' 和 'y' 属性。",c);this.x-=c.x;this.y-=c.y;return this}})),G="pageXOffset" in U?function(){var c=z(this);return new D(c.pageXOffset,c.pageYOffset)}:B;ah(i,{getWindowSize:function(){var e=this.getDom(),c=z(this);return new D(c.outerWidth||e.clientWidth,c.outerHeight||e.clientHeight)},setWindowSize:function(c,o){var e=n(c,o,this.getDom(),"getWindowSize");z(this).resizeTo(e.x,e.y);return this},getSize:function(){var c=this.getDom();assert.isNode(c,"document.getSize(): document.getDom() 必须返回 DOM 节点。");return new D(c.clientWidth,c.clientHeight)},getScroll:G,getPosition:G,getScrollSize:function(){var p=this.getDom(),o=this.getSize(),e=Math.max,c=p.ownerDocument.body;return new D(e(p.scrollWidth,c.scrollWidth,o.x),e(p.scrollHeight,c.scrollHeight,o.y))},setScroll:function(c,o){var e=n(c,o,this,"getScroll");z(this).scrollTo(e.x,e.y);return this}});ag.implement({getScrollSize:function(){var c=this.getDom();assert.isNode(c,"Element.prototype.getScrollSize(): {this.getDom()} 必须返回 DOM 节点。");return new D(c.scrollWidth,c.scrollHeight)},getSize:function(){var c=this.getDom();assert.isNode(c,"Element.prototype.getSize(): {this.getDom()} 必须返回 DOM 节点。");return new D(c.offsetWidth,c.offsetHeight)},getOuterSize:function(){var c=this.getDom();return this.getSize().add(ag.getSize(c,"width","m"),ag.getSize(c,"height","m"))},getOffset:function(){assert.isElement(this.getDom(),"Element.prototype.getOffset(): {this.getDom()} 必须返回 DOM 节点。");var c=this.getDom(),o=c.style.left,e=c.style.top;if(!o||!e){if(ad(c,"absolute")){return this.getOffsets(this.getOffsetParent())}o=V(c,"left");e=V(c,"top")}return new D(parseFloat(o)||0,parseFloat(e)||0)},getWidth:function(){assert.isElement(this.getDom(),"Element.prototype.getWidth(): {this.getDom()} 必须返回 DOM 节点。");var e=this.getDom(),c=parseFloat(e.style.width);return isNaN(c)?b(e,"width"):c},getHeight:function(){assert.isElement(this.getDom(),"Element.prototype.getWidth(): {this.getDom()} 必须返回 DOM 节点。");var e=this.getDom(),c=parseFloat(e.style.height);return isNaN(c)?b(e,"height"):c},getScroll:B,getBound:function(){var e=this.getPosition(),c=this.getSize();return{left:e.x,top:e.y,width:c.x,height:c.y,right:e.x+c.x,bottom:e.y+c.y}},getPosition:ae.getBoundingClientRect?function(){assert.isNode(this.getDom(),"Element.prototype.getPosition(): {this.getDom()} 必须返回 DOM 节点。");var p=this.getDom(),o=p.getBoundingClientRect(),w=al(p),c=w.getDom(),e=ad(p,"fixed")?{x:0,y:0}:w.getScroll();return new D(o.left+e.x-c.clientLeft,o.top+e.y-c.clientTop)}:function(){var o=this.getDom(),e=o,w=q(e);while(e&&!g(e)){w.add(e.offsetLeft,e.offsetTop);if(navigator.isFirefox){if(s(e)){w.add(b(e,L),b(e,A))}var c=e.parentNode;if(c&&y(c,"overflow")!="visible"){w.add(b(c,L),b(c,A))}}else{if(e!=o&&navigator.isSafari){w.add(b(e,L),b(e,A))}}e=e.offsetParent}if(navigator.isFirefox&&s(o)){w.add(-b(o,L),-b(o,A))}return w},getOffsets:function(e){if(g(this.getDom())){return new D(0,0)}var c=this.getDom(),o=this.getPosition().minus(q(c));if(e){assert.isElement(e,"Element.prototype.getOffsets(relative): 参数 {relative} ~。");o.minus(Y.$(e).getOffsets()).add(-b(c,"marginLeft")-b(e,L),-b(c,"marginTop")-b(e,A))}return o},getOffsetParent:function(){assert.isNode(this.getDom(),"Element.prototype.getOffsetParent(): {this.getDom()} 必须返回 DOM 节点。");var c=this.getDom().offsetParent||al(this.getDom()).body;while(c&&!g(c)&&ad(c,"static")){c=c.offsetParent}return c}}).implement({setSize:function(c,e){return O(this,"pb",c,e)},setOuterSize:function(c,e){return O(this,"mpb",c,e)},setWidth:function(c){assert.isElement(this.getDom(),"Element.prototype.setWidth(value): {this.getDom()} 必须返回 DOM 节点。");this.getDom().style.width=(c>0?c:0)+"px";return this},setHeight:function(c){assert.isElement(this.getDom(),"Element.prototype.setWidth(value): this.getDom(){this.getDom()} 必须返回 DOM 节点。");this.getDom().style.height=(c>0?c:0)+"px";return this},setScroll:function(c,w){var e=this.getDom(),o=m(c,w);assert.isNode(e,"Element.prototype.setScro{this.getDom()} 必须返回 DOM 节点。返回 DOM 节点。");if(o.x!=null){e.scrollLeft=o.x}if(o.y!=null){e.scrollTop=o.y}return this},setOffset:function(e){assert.isElement(this.getDom(),"Element.prototype.setOffset(p): {this.getDom()} 必须返回 DOM 节点。");assert(e&&"x" in e&&"y" in e,"Element.prototype.setOffset(p): 参数 {p} 必须有 'x' 和 'y' 属性。",e);var c=this.getDom().style;c.top=e.y+"px";c.left=e.x+"px";return this},setPosition:function(c,am){var e=this,w=e.getOffset().minus(e.getPosition()),o=m(c,am);if(o.x){w.x+=o.x}if(o.y){w.y+=o.y}ag.setMovable(e.getDom());return e.setOffset(w)}},2);ah(ag,{setMovable:function(c){assert.isElement(c,"Element.setMovable(elem): 参数 elem ~。");if(!ad(c,"absolute")){c.style.position="relative"}},checkPosition:ad,getXY:m});function ad(e,c){return y(e,"position")===c}function z(c){return(c.ownerDocument||c).defaultView}function B(){var c=this.getDom();assert.isNode(c,"Element.prototype.getScroll(): {this.getDom()} 必须返回 DOM 节点。返回 DOM 节点。");return new D(c.scrollLeft,c.scrollTop)}function g(c){return j.test(c.nodeName)}function s(c){return V(c,"MozBoxSizing")!="border-box"}function m(c,e){return Z.isObject(c)?c:{x:c,y:e}}function n(c,am,o,w){var e=m(c,am);if(e.x==null){e.x=o[w]().x}if(e.y==null){e.x=o[w]().y}assert(!isNaN(e.x)&&!isNaN(e.y),"adaptXY(x, y, obj, method): 参数 {x}或{y} 不是合法的数字。(method = {method})",c,am,w);return e}function q(c){var e=new D(0,0);c=c.parentNode;while(c&&!g(c)){e.add(-c.scrollLeft,-c.scrollTop);c=c.parentNode}return e}var ak=/\[([^=]*)(=(.*))?\]/,t=/\./g,a={INPUT:"checked",OPTION:"selected",TEXTAREA:"value"},af="firstElementChild" in ae?[u,"nextElementSibling","firstElementChild","parentNode","previousElementSibling","lastElementChild"]:[u,"nextSibling","firstChild","parentNode","previousSibling","lastChild"],H=ag.nodeMaps={parents:[ai,af[3]],previouses:[ai,af[4]],nexts:[ai,af[1]],next:[u,af[1],af[1]],first:af,last:[u,af[4],af[5]],previous:[u,af[4],af[4]],parent:[u,af[3],af[3]],child:[ai,af[1],af[2]],odd:[function(e,c){return ai(e,function(){return c=c===false},af[1],af[2])}],children:[function(e,c){return new Py.ElementList(W(e,c))}],siblings:[function(e,c){return ai(e,function(o){return o!=e&&c(el)})}]},W="all" in i?function(e,c){assert.isFunction(c,"Element.prototype.find(elem, fn): 参数 {fn} ~。");return Array.prototype.filter.call(e.all,c)}:function(w,o){assert.isFunction(o,"Element.prototype.find(elem, fn): 参数 {fn} ~。");var am=[],e=[w],an,c;while(e.length){an=e.pop();for(c=an.firstChild;c;c=c.nextSibling){if(c.nodeType!=1){continue}if(o(c)){am.push(c)}e.push(c)}}return am};ah(ag,{hasChild:!ae.compareDocumentPosition?function(c,e){while(e=e.parentNode){if(c===e){return true}}return false}:function(c,e){return !!(c.compareDocumentPosition(e)&16)},empty:function(c){while(c.lastChild){ag.dispose(c.lastChild)}},dispose:function(c){if(navigator.isIE){if(c.clearAttributes){c.clearAttributes()}e.IEvent.un.call(c);if(c.nodeName==="OBJECT"){for(var e in c){if(typeof c[e]==="function"){c[e]=I}}}}ag.empty(c);c.parentNode&&c.parentNode.removeChild(c)}});ag.implementIf({getElementsByAttribute:function(c,e){return W(this.getDom(),function(o){return(e===undefined)!==(ag.getAttr(o,c)==e)})},getElementsByClassName:function(c){assert.isString(c,"Element.prototype.getElementsByClassName(classname): 参数 {classname} ~。");c=c.split(/\s/);return W(this.getDom(),function(o){var e=c.length;while(e--){if(!ag.hasClass(o,c[e])){return false}}return true})},getElementsByTagName:function(c){return this.getElementsByTagName(c)},getElementsByName:function(c){return this.getElementsByAttribute("name",c)},findAll:ae.querySelectorAll?function(c){assert.isString(c,"Element.prototype.findAll(selecter): 参数 {selecter} ~。");return new Y.Py.ElementList(this.getDom().querySelectorAll(c))}:function(c){assert.isString(c,"Element.prototype.findAll(selecter): 参数 {selecter} ~。");var e=new Y.Py.ElementList([this.getDom()]);c.split(" ").forEach(function(o){e=N(e,o)});return e},get:function(e,c){switch(typeof e){case"string":c=r(c);break;case"function":c=e;e="children";break;case"number":c=r(e);e="first";break}var o=H[e];assert(o,"Element.prototype.get(type, fn): 函数不支持 {0}类型 的节点关联。",e);return o[0](this.getDom(),c,o[1],o[2])}},4).implement({contains:function(e){var c=this.getDom();assert.isNode(c,"Element.prototype.contains(child): this.getDom() 返回的必须是 DOM 节点。");return e==c||ag.hasChild(c,e)},hasChild:function(e){var c=this.getDom();return arguments.length?ag.hasChild(c,e):c.firstChild!==null}},5).implement({find:ae.querySelector?function(c){assert.isString(c,"Element.prototype.find(selecter): 参数 {selecter} ~。");return this.getDom().querySelector(c)}:function(c){var e=this.getDom();assert.isString(c,"Element.prototype.find(selecter): 参数 {selecter} ~。");if(c.split(" ").each(function(o){return !!(e=N(e,o)[0])})){return Y.$(e)}},clone:function(e,w,c){assert.isNode(this.getDom(),"Element.prototype.clone(copyDataAndEvent, contents, keepid): this.getDom() 返回的必须是 DOM 节点。");var p=this.getDom(),ao=p.cloneNode(w=w!==false);if(w){for(var am=ao.getElementsByTagName("*"),an=p.getElementsByTagName("*"),o=am.length;o--;){Q(am[o],an[o],e,c)}}Q(p,ao,e,c);if(navigator.isQuirks){Z.update(p.getElementsByTagName("object"),"outerHTML",ao.getElementsByTagName("object"),true)}return ao},insert:"insertAdjacentElement" in ae?function(e,c){var o=this.getDom();assert.isNode(o,"Element.prototype.insert(html, swhere): this.getDom() 返回的必须是 DOM 节点。");assert(!c||"afterEnd beforeBegin afterBegin beforeEnd ".indexOf(c+" ")!=-1,"Element.prototype.insert(html, swhere): 参数 swhere 必须是 beforeBegin、beforeEnd、afterBegin 或 afterEnd 。");o[typeof e==="string"?"insertAdjacentHTML":"insertAdjacentElement"](c,e);switch(c){case"afterEnd":e=o.nextSibling;break;case"beforeBegin":e=o.previousSibling;break;case"afterBegin":e=o.firstChild;break;default:e=o.lastChild;break}return Y.$(e)}:function(e,c){var o=this.getDom();assert.notNull(e,"Element.prototype.insert(html, swhere): 参数 {html} ~。");assert.isNode(o,"Element.prototype.insert(html, swhere): this.getDom() 返回的必须是 DOM 节点。");assert(!c||"afterEnd beforeBegin afterBegin beforeEnd ".indexOf(c+" ")!=-1,"Element.prototype.insert(html, swhere): 参数 {swhere} 必须是 beforeBegin、beforeEnd、afterBegin 或 afterEnd 。",c);if(!e.nodeType){e=ag.parse(e)}switch(c){case"afterEnd":if(!o.nextSibling){assert(o.parentNode!=null,"Element.prototype.insert(html, swhere): 节点无父节点时无法插入 {this}",o);o.parentNode.appendChild(e);break}o=o.nextSibling;case"beforeBegin":assert(o.parentNode!=null,"Element.prototype.insert(html, swhere): 节点无父节点时无法插入 {this}",o);o.parentNode.insertBefore(e,o);break;case"afterBegin":if(o.firstChild){o.insertBefore(e,o.firstChild);break}default:assert(arguments.length==1||!c||c=="beforeEnd","Element.prototype.insert(html, swhere): 参数 {swhere} 必须是 beforeBegin、beforeEnd、afterBegin 或 afterEnd 。",c);o.appendChild(e);break}return e},append:function(c,o){var e=this;assert.notNull(c,"Element.prototype.append(html, escape): 参数 {html} ~。");if(!c.nodeType){c=o?al(e.getDom()).createTextNode(c):ag.parse(c)}assert.isNode(c,"Element.prototype.append(html, escape): 参数 {html} 不是合法的 节点或 HTML 片段。");return e.appendChild(c)},wrapWith:function(c){c=this.replaceWith(c);while(c.lastChild){c=c.lastChild}c.appendChild(this.getDom());return c},replaceWith:function(c){assert.notNull(c,"Element.prototype.replaceWith(html): 参数 {html} ~。");if(!c.nodeType){c=ag.parse(c)}var e=this.getDom();assert(e.parentNode,"Element.prototype.replaceWith(html): 当前节点无父节点，不能执行此方法 {this}",e);assert.isNode(c,"Element.prototype.replaceWith(html, escape): 参数 {html} ~或 HTM 片段。");e.parentNode.replaceChild(c,e);return c}},3).implement({renderTo:function(c){c=c&&c!==true?Y.$(c):i.body;assert.isNode(c,"Element.prototype.renderTo(elem): 参数 {elem} ~。");assert.isNode(this.getDom(),"Element.prototype.render{this.getDom()} 必须返回 DOM 节点。返回 DOM 节点。");if(this.getDom().parentNode!==c){c.appendChild(this.getDom())}return this},remove:function(e){var c=this.getDom();assert(e&&this.hasChild(e),"Element.prototype.remove(child): 参数 {child} 不是当前节点的子节点",e);e?this.removeChild(e):(c.parentNode&&c.parentNode.removeChild(c));return this},empty:function(){assert.isNode(this.getDom(),"Element.prototype.empty(): {this.getDom()} 必须返回 DOM 节点。");ag.empty(this.getDom());return this},dispose:function(){assert.isNode(this.getDom(),"Element.prototype.dispose(): {this.getDom()} 必须返回 DOM 节点。");ag.dispose(this.getDom())}},2);function u(o,e,c,p){o=o[p];while(o){if(o.nodeType==1&&e(o)){return Y.$(o)}o=o[c]}return null}function ai(o,e,c,w){o=o[w||c];var p=[];while(o){if(o.nodeType==1&&e(o)){p.push(o)}o=o[c]}return new Py.ElementList(p)}function Q(o,p,e,c){if(!c){p.removeAttribute("id")}if(p.mergeAttributes){p.clearAttributes();p.mergeAttributes(o);p.removeAttribute("data");if(o.options){Z.update(o.options,"selected",p.options,true)}}if(e){Y.cloneData(o,p)}var w=a[o.tagName];if(w){p[w]=o[w]}}function N(o,c){switch(c.charAt(0)){case".":o=o.getElementsByClassName(c.replace(t," "));break;case"[":var e=ak.exec(c);o=o.getElementsByAttribute(e[1],e[3]);break;default:o=o.getElementsByTagName(c);break}return o}function r(o){switch(typeof o){case"undefined":o=Function.returnTrue;break;case"string":var e=o.toUpperCase();o=function(p){return p.tagName==e};break;case"number":var c=o;o=function(p){return --c<0};break}assert.isFunction(o,"getFilter(fn): {fn} 必须是一个函数。",o);return o}try{i.execCommand("BackgroundImageCache",false,true)}catch(ag){}ae=null})(this);namespace("System.Ajax.Ajax");namespace(".Ajax",Py.Class({onAbort:function(){this.trigger("abort")},onStart:function(a){this.trigger("start",a)},onSuccess:function(a,b){this.trigger("success",a)},onError:function(a,b){this.trigger("error",a)},onTimeout:function(a){this.trigger("timeout")},onComplete:function(b,a){this.trigger("complete",b)},onStateChange:function(a){var c=this,d=c.xhr,b;if(d&&(d.readyState===4||a)){d.onreadystatechange=Function.empty;c.xhr=null;if(a===true){d.abort();c.onTimeout(d);b="Request Timeout"}else{if(a){b="error"}else{a=true;b=!XMLHttpRequest.isOk(d)&&(d.statusText||"error")}}if(!b){c.onSuccess(d.responseText,d)}else{if(a===true){a=new Error(b)}a.xhr=d;c.onError(a,d)}c.onComplete(d,b);d=null}},constructor:function(a){if(a){Object.extend(this,a)}},type:"GET",async:true,link:"wait",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/javascript, text/html, application/xml, text/xml, */*"},disableCache:false,check:function(b){var a=this;if(!a.xhr){return true}switch(a.link){case"wait":a.one("complete",function(){this.send(b,true);return false});return false;case"cancel":a.abort();return true;default:assert(!link||link=="ignore","Ajax.prototype.send(data): 成员 {link} 必须是 wait、cancel、ignore 之一。",a.link);return false}return true},send:function(g){assert.notNull(this.url,"Ajax.prototype.send(data, chain): {this.url} ~。",this.url);assert(/^(GET|POST|PUT)$/.test(this.type),"{this.type} 必须是 GET、PUT 或 POST (注意大小写) 。");var f=this,d=f.type,a=f.url,c=f.async;if(!f.check(g)){return f}f.onStart(g);if(typeof g!=="string"){g=String.param(g)}if(g&&d=="GET"){a+=(a.indexOf("?")>=0?"&":"?")+g;g=null}if(f.disableCache){a+=(a.indexOf("?")>=0?"&":"?")+Py.id++}var i=f.xhr=new XMLHttpRequest();try{if("username" in f){i.open(d,a,c,f.username,f.password)}else{i.open(d,a,c)}}catch(h){f.xhr=null;h.xhr=i;f.onError(h,i);f.onComplete(i,"error");return f}for(var b in f.headers){try{i.setRequestHeader(b,f.headers[b])}catch(h){trace.error(h)}}i.onreadystatechange=function(){f.onStateChange(false)};try{i.send(g)}catch(h){f.onStateChange(h);return f}if(!c){f.onStateChange()}else{if(f.timeouts>0){setTimeout(function(){f.onStateChange(true)},f.timeouts)}}return f},setEncoding:function(a){if(a){this.setHeader("Accept-Charset",a)}return this.setHeader("contentType","application/x-www-form-urlencoded"+(a?"; charset="+a:""))},setHeader:function(a,b){if(!this.hasOwnProperty("header")){this.header=Object.clone(this.header)}this.header[a]=b;return this},abort:function(){if(this.xhr){this.xhr.abort();this.onAbort();this.xhr=null}return this},xType:"ajax"}).addEvents());String.map("get post",function(a){var b=Function.empty;return function(g,h,e,d,f,c){assert.isString(g,"Ajax."+a+"(url, data, onsuccess, onerror, timeouts, ontimeout): 参数{url} 必须是一个地址。如果需要提交至本页，使用 location.href。");new Ajax({url:g,onSuccess:e||b,onError:d||b,timeouts:f,onTimeout:c||b,type:a.toUpperCase()}).send(h)}},Ajax);namespace("System.Fx.Base");(function(d){var b={},c=Function.empty;function a(){var e=this.length;while(--e>=0){this[e].step()}}d.namespace(".Fx.",{Base:d.Class({fps:50,duration:500,link:"ignore",xType:"fx",onStart:c,onComplete:c,onStop:c,constructor:function(e){if(e){Object.extend(this,e)}this._competeListeners=[]},transition:function(e){return -(Math.cos(Math.PI*e)-1)/2},compile:function(g,f){var e=this;e.from=g;e.to=f;return e},step:function(){var e=this,f=Date.now()-e.time;if(f<e.duration){e.set(e.transition(f/e.duration))}else{e.set(1);e.complete()}},set:Function.empty,addOnComplete:function(e){assert.isFunction(e,"Fx.Base.prototype.addOnComplete(fn): 参数 {fn} ~。");this._competeListeners.unshift(e);return this},check:function(j,i,g,h,f){var e=this;if(e.timer){switch(f||e.link){case"wait":this._competeListeners.push(function(){this.start(j,i,g,h,true);return false});return false;case"restart":e.pause();while(e._competeListeners.pop()){}break;case"cancel":e.stop();break;case"replace":e.pause();break;default:assert(!f||f=="ignore","Fx.Base.prototype.start(from, to, duration, callback, link): 参数 {link} 必须是 wait、restart、cancel、replace、ignore 之一。",f);return false}}if(g>0){this.duration=g}else{if(g<-1){this.duration*=-g}}if(h){assert.isFunction(h,"Fx.Base.prototype.start(from, to, duration, callback, link): 参数 {callback} ~。");this._competeListeners.unshift(h)}return true},start:function(){var f=this,e=arguments;if(f.check.apply(f,e)){f.time=0;f.compile(e[0],e[1]).set(0);f.resume().onStart(e[4])}return f},complete:function(){var f=this;f.pause();var e=f._competeListeners;while(e.length){if(e.pop().call(f)===false){return f}}f.onComplete();return f},stop:function(){var e=this;e.set(1);e.pause().onStop();return e},pause:function(){var e=this;if(e.timer){e.time=Date.now()-e.time;var g=e.fps,f=b[g];f.remove(e);if(f.length===0){clearInterval(e.timer);delete b[g]}e.timer=undefined}return e},resume:function(){var e=this;if(!e.timer){e.time=Date.now()-e.time;var g=e.fps,f=b[g];if(f){f.push(e);e.timer=f[0].timer}else{e.timer=setInterval(Function.bind(a,b[g]=[e]),Math.round(1000/g))}}return e}}),compute:function(g,f,e){return(f-g)*e+g}})})(Py);namespace("System.Fx.Animate");using("System.Dom.Element");using("System.Fx.Base");(function(t){var k=/^#([\da-f]{1,2})([\da-f]{1,2})([\da-f]{1,2})$/i,j=/(\d+),\s*(\d+),\s*(\d+)/;Object.extend(String,{hexToArray:function(C){assert.isString(C,"String.hexToArray(hex): 参数 {hex} ~。");if(C=="transparent"){return[255,255,255]}var c=C.match(k);if(!c){return null}var e=0,p=[];while(++e<=3){var D=c[e];p.push(parseInt(D.length==1?D+D:D,16))}return p},rgbToArray:function(e){assert.isString(e,"String.rgbToArray(rgb): 参数 {rgb} ~。");var c=e.match(j);if(!c){return null}var p=0,C=[];while(++p<=3){C.push(parseInt(c[p]))}return C},arrayToHex:function(c){assert.isArray(c,"String.arrayToHex(rgb): 参数 {rgb} ~。");var e=-1,p=[];while(++e<3){var C=c[e].toString(16);p.push((C.length==1)?"0"+C:C)}return"#"+p.join("")}});var w=t.Element,i=t.Fx,y=i.compute,f=function(D,C,p,F,E){var e=p.capitalize(),c=function(G){return G["get"+e]()};D[p]={parser:q[p]={set:function(H,G,K,J,I){H["set"+e]({x:y(K.x,J.x,I),y:y(K.y,J.y,I)})},parse:s,get:c},from:F||c(C),to:E}},v=function(D,e,c,G,F){var C=e["get"+w.specialAttr[c]](),E=e.getOffset();w.setMovable(e);return b(D,e,"left","top",G||C,F,C.x-E.x,C.y-E.y)},A={size:function(p,e,c,D,C){return b(p,e,"width","height",D||e.getSize(),C,w.getSize(e,"width","pb"),w.getSize(e,"height","pb"))},position:v,offsets:v,offset:f,scroll:f},q={opacity:{set:function(e,c,D,C,p){e.setOpacity(y(D,C,p))},parse:s,get:function(c){return c.getOpacity()}}},o=t.namespace(".Fx.Animate",t.Fx.Base.extend({dom:null,current:null,link:"wait",getDom:function(){return this.dom.getDom()},constructor:function(c){if(c){if(c.nodeType){this.dom=t.$(c)}else{Object.extend(this,c)}}this._competeListeners=[]},set:function(D){var e=this,c,C=e.dom,p;for(c in e.current){p=e.current[c];p.parser.set(C,c,p.from,p.to,D)}},compile:function(p,e){assert.notNull(p,"Fx.Animate.prototype.start(from, to, duration, callback, link): 参数 {from} ~。");assert.notNull(e,"Fx.Animate.prototype.start(from, to, duration, callback, link): 参数 {to} ~。");var c=this;x(c.current={},c.dom,p,e);return c}}));o.specialAttr=A;o.parsers={number:{set:!navigator.isStd?function(C,c,F,E,D){try{C.style[c]=y(F,E,D)}catch(p){}}:function(e,c,D,C,p){e.style[c]=y(D,C,p)+"px"},parse:function(c){return typeof c=="number"?c:parseFloat(c)},get:w.styleNumber},color:{set:function n(e,c,D,C,p){e.style[c]=String.arrayToHex([Math.round(y(D[0],C[0],p)),Math.round(y(D[1],C[1],p)),Math.round(y(D[2],C[2],p))])},parse:function(c){return String.hexToArray(c)||String.rgbToArray(c)},get:w.getStyle}};function x(C,e,E,F){for(var G in F){var D=null,H=E[G],I=F[G];G=G.toCamelCase();if(!(G in q)){if(G in A){D=A[G](C,e,G,H,I);if(D){x(C,e,D[0],D[1])}continue}else{for(var c in o.parsers){c=o.parsers[c];D=c.parse(I,G);if(D||D===0){q[G]=c;break}}}}if(parser=q[G]){C[G]={from:parser.parse(H===undefined?parser.get(e,G):H),to:D===null?parser.parse(I,G):D,parser:parser};assert(C.from!==null&&C.to!==null,"Animate.prototype.complie(from, to): 无法处理属性 {key} 的值。",G)}}}function b(D,e,H,E,F,G,C,p){var c=[{},{}];c[0][H]=F.x-C;c[1][H]=G.x-C;c[0][E]=F.y-p;c[1][E]=G.y-p;return c}function s(c){return c}var r=i.maps={all:true,opacity:"opacity",height:"height marginTop paddingTop marginBottom paddingBottom",width:"width marginLeft paddingLeft marginRight paddingRight"},a=i.getFx=function(c){var e=Py.getData(c,"fx");if(!e){e=Py.getData(c,"fxcfg")||{};e.dom=c.getDom();Py.setData(c,"fx",e=new Py.Fx.Animate(e))}return e},m=i.getData=function(e,D){var C=t.data(e,"fxdata"),c,p=e.getDom();for(c in D){C[c]=d(p,c)}return C},B=w.prototype,z=B.show,h=B.animate,g=w.isHidden,l=B.hide,d=w.styleNumber;r.all=[r.opacity,r.height,"width"].join(" ");r.size=[r.height,r.width].join(" ");Object.update(r,function(c){return Function.from(String.map(c,Function.from(0),{}))});String.map("left right top bottom",Function.from(function(p,c){p.parentNode.style.overflow="hidden";var e={};if(/left|right/.test(c)){e["margin-right"]=e["margin-left"]=p.offsetWidth}else{e["margin-top"]=e["margin-bottom"]=p.offsetHeight}c="margin-"+c;e[c]=-e[c];return e}),r);function u(e,c){var p=r[c||"all"];return typeof p=="function"?p(e,c):p}w.implement({animate:function(){var e=arguments,c=e[0],p=e[1];if(typeof c==="string"){(e[1]={})[c]=p;e[0]={}}else{if(typeof p!=="object"){Array.prototype.unshift.call(e,{})}}if(e[2]!==0){p=a(this);p.start.apply(p,e)}else{h.apply(this,e)}return this},show:function(D,C,c){var p=this,E=p.getDom();if(D&&g(E)){var e=a(p),G,F;if(!e.timer){E.style.overflow="hidden";E.style.display="";G=u(p,c);F=t.getData(p,"fxdata")||m(p,G);e.start(G,F,D,C)}}else{z.apply(p,arguments)}return p},hide:function(D,C,c){var p=this,E=p.getDom();if(D&&!g(E)){var e=a(p),F;p.setStyle("overflow","hidden");if(!e.timer){F=u(p,c);e.addOnComplete(l).start(m(p,F),F,D,C)}}else{l.apply(p,arguments)}return this},highlight:function(c,C,p){assert(!c||Object.isArray(c)||k.test(c)||j.test(c),"Element.prototype.highlight(color, duration, callBack): 参数 {color} 不是合法的颜色。",c);assert(!p||Object.isFunction(p),"Element.prototype.highlight(color, duration, callBack): 参数 {callBack} 不是可执行的函数。",p);var e=a(this),E={backgroundColor:w.getStyle(this,"backgroundColor")},D={backgroundColor:c||"#ffff88"};C/=2;if(!e.timer){e.start(E,D,C).start(D,E,C,p)}return this}},2)})(Py);